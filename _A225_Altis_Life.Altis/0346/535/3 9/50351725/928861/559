params[["_shopType",""],["_isRefresh",false]];disableSerialization;private"_price";private _display=findDisplay 2400;if(isNull _display) exitWith{};private _buyList=_display displayCtrl 2401;private _sellList=_display displayCtrl 2402;private _buyButton=_display displayCtrl 2406;private _sellButton=_display displayCtrl 2407;{_x ctrlEnable false;}forEach[_buyButton,_sellButton];if!(_isRefresh) then{lbClear _buyList;};lbClear _sellList;private _shopInfo=[_shopType]call life_fnc_virt_shops;_shopInfo params[["_title",""],["_buyItems",[]],["_sellItems",[]]];ctrlSetText[2403,format["%1",_title]];ctrlSetText[2408,format["Weight: %1/%2",life_carryWeight,life_maxWeight]];private _itemIndex=0;private _excludeInfamy=["water","apple","redgull","adrenalineShot","fuelF","tbacon","towRope","lockpick","ziptie","blindfold"];{_x params[["_item",""]];private _name=["getName",_item]call life_fnc_virtItemCfg;private _basePrice=["getBasePrice",_item]call life_fnc_virtItemCfg;private _price=_basePrice*([_shopType,true]call life_fnc_getDiscount);private _idx=if(_isRefresh) then{_itemIndex}else{_buyList lbAdd""};_price=switch(true) do{case((_item isEqualTo"vammo")&&(7 in life_achievements)):{0};default{_price};};private _nearMedSupply=nearestObjects[player,["C_IDAP_supplyCrate_F"],6];if(count _nearMedSupply>=1) then{if((_nearMedSupply select 0) getVariable["ga_medSupply",false]) then{_price=_price*3;