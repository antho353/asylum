params[["_type","",[""]],["_loadout",[],[[]]],["_virtualLoadout",[],[[]]],["_msg",false,[false]]];if(_type isEqualTo""||_loadout isEqualTo[]) exitWith{["An error has occured. Please try again.","weppurchase"]spawn life_fnc_handleMessage;-1};_loadout params[["_primary",[],[[]]],["_secondary",[],[[]]],["_hgun",[],[[]]],["_uniform",[],[[]]],["_vest",[],[[]]],["_backpack",[],[[]]],["_helmet","",[""]],["_facewear","",[""]],["_binos",[],[[]]],["_assignedItems",[],[[]]]];private _items=[];{if!(_x isEqualTo[]) then{_items pushBack[_x select 0,1];if!((_x select 1) isEqualTo"") then{_items pushBack[_x select 1,1];};if!((_x select 2) isEqualTo"") then{_items pushBack[_x select 2,1];};if!((_x select 3) isEqualTo"") then{_items pushBack[_x select 3,1];};if!((_x select 4) isEqualTo[]) then{_items pushBack[(_x select 4) select 0,1];};if!((_x select 6) isEqualTo"") then{_items pushBack[_x select 6,1];};};}forEach[_primary,_secondary,_hgun];{if!(_x isEqualTo[]) then{_items pushBack[_x select 0,1];if!((_x select 1) isEqualTo[]) then{{_items pushBack[_x select 0,_x select 1];}forEach(_x select 1);};};}forEach[_uniform,_backpack,_vest];if!(_helmet isEqualTo"") then{_items pushBack[_helmet,1];};if!(_facewear isEqualTo"") then{_items pushBack[_facewear,1];};if!(_binos isEqualTo[]) then{_items pushBack[_binos select 0,1];};if!(_assignedItems isEqualTo[]) then{if!((_assignedItems select 1) isEqualTo"") then{_items pushBack[_assignedItems select 0,1];};if!((_assignedItems select 5) isEqualTo"") then{_items pushBack[_assignedItems select 5,1];};};private _priceArr=[];switch(_type) do{case"rebel":{_priceArr=[5]call life_fnc_clothing_reb;_priceArr append(["rebelwep"]call life_fnc_weaponAddons);_priceArr append((["rebelwep"]call life_fnc_weaponShopCfg) select 1);};case"cop":{_priceArr=[5]call life_fnc_clothing_cop;_priceArr append(["police_weapons"]call life_fnc_weaponAddons);_priceArr append((["police_weapons"]call life_fnc_weaponShopCfg) select 1);_priceArr append((["police_equipment"]call life_fnc_weaponShopCfg) select 1);};case"skiptracer":{_priceArr=[5]call life_fnc_clothing_reb;