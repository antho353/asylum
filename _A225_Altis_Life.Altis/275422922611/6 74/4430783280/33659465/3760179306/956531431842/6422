_progressBar progressSetPosition _currentPoint;_progressText ctrlSetText format["%1 (%2%3)",_text,round(_currentPoint*100),"%"];private _checkToExit=!(call life_fnc_isDominationActive);private _friendlyInArea=allPlayers select{(getPos _x inPolygon life_dominationPoly)&&((group _x isEqualTo group player)||((_x getVariable["gang_data",[-1]]select 0) isEqualTo _playerGangID))};private _hasTooManyPlayers=(count _friendlyInArea>10);private _pos=getPosATL _captureFlagObj;if(player distance _pos>12||life_isDowned||player getVariable["ga_restrained",false]||!alive player) exitWith{false};if(_checkToExit) exitWith{false};if((_captureFlagObj getVariable["ga_domination_ticksLeft",300])<=0) exitWith{["This capture point has ran out of points! Wait for it to move!","basic"]spawn life_fnc_handleMessage;false};if(_hasTooManyPlayers) exitWith{["Capture points during domination can't be captured with more than 10 friendlys in the warzone!","basic"]spawn life_fnc_handleMessage;false};if!(isNull objectParent player) exitWith{false};if(_currentPoint>=1) exitWith{true};false;};life_dominationCapturingFlag=false;[]spawn life_fnc_dominationMissionHardpoint;5 cutText["","PLAIN"];if!(_isSuccess) exitWith{};private _allGangMembers=allPlayers select{(getPos _x inPolygon life_dominationPoly)&&(_x getVariable["gang_data",[-1]]select 0) isEqualTo(life_gang_data select 0)};private _gangMembersFlag=_allGangMembers select{_captureFlagObj distance2D _x<=20};private _warzonePlayers=allPlayers select{(getPos _x inPolygon life_dominationPoly)};_captureFlagObj setVariable["ga_domination_data",[_playerGangID,_playerGangName,group player],true];private _xMarkerIDX=(domination_flags find _captureFlagObj)+1;private _xMarker=format["domination_cap_%1",_xMarkerIDX];_xMarker setMarkerText format["%1 - %2",_defaultFlagName,_playerGangName];[[3,format["%1 has been captured by %2!",_defaultFlagName,_playerGangName]],"life_fnc_broadcast",_warzonePlayers]spawn life_fnc_MP;[[format["%1 has captured %2 for your gang. Your gang will be given 10 points every 20 seconds this flag is under your control.",name player,_defaultFlagName],"shortwarning"],"life_fnc_handleMessage",_allGangMembers]spawn life_fnc_MP;[[12,1],"life_fnc_updateRemoteStat",_gangMembersFlag]spawn life_fnc_MP;life_dominationStatCache pushBack[getPlayerUID player,profileName,(life_gang_data param[1,"No Gang"]),(life_gang_data param[0,-1]),"capture",1];