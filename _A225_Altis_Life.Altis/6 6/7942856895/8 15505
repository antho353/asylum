#include"..\..\macro.h"
#include"\a3\editor_f\Data\Scripts\dikCodes.h"
params["_ctrl","_code","_shift","_ctrlKey","_alt"];if(_shift&&(_code isEqualTo 74)) exitWith{["This feature is disabled on Asylum Servers. (Shift + Numpad -)","basic"]spawn life_fnc_handleMessage;disableUserInput true;disableUserInput false;true};if(_code in(actionKeys"Diary")||inputAction"diary">0) exitWith{true};if(visibleMap&&{(_ctrlKey||_code isEqualTo 29)&&!(currentChannel in[3,4])}) exitWith{true};private["_veh","_locked"];private _handled=false;private _interactionKey=if(((count actionKeys"User10") isEqualTo 0)&&life_scrollDisabled) then{219}else{((actionKeys"User10") select 0)};private _mapKey=((actionKeys"ShowMap") select 0);private _interruptionKeys=[17,30,31,32];private _functionKeys=[4,5,6,7,24,15,20,38,33,34,22];private _allowedKeys=[1];{_allowedKeys append _x}forEach[actionKeys"User12"];if((life_action_in_use)&&!(_code in _allowedKeys)) exitWith{};if(life_isDowned) exitWith{false};if(((_code in(actionKeys"ShowMap"))&&(call life_adminLevel)<=1)&&player getVariable["ga_restrained",false]) exitWith{true};if((_code in(actionKeys"MiniMap")||_code in(actionKeys"MiniMapToggle")||_code in(actionKeys"GetOver")||_code in(actionKeys"ReloadMagazine")||_code in(actionKeys"salute")||_code in(actionKeys"Throw")||_code in(actionKeys"GetOut")||_code in(actionKeys"Eject")||_code in(actionKeys"DefaultAction")||_code in(actionKeys"SitDown")||_code in(actionKeys"MenuSelect")||_code in(actionKeys"ForceCommandingMode")||_code in(actionKeys"PrevAction")||_code in(actionKeys"NextAction")||_code in(actionKeys"Action")||_code in(actionKeys"ActionContext"))&&{(player getVariable["ga_restrained",false])}) exitWith{true};if((outlw_MR_keybindingMenuActive||outlw_MR_isRepacking)&&{_code in(actionKeys"ReloadMagazine")}) exitWith{["You cannot reload while repacking your magazines.","basic"]spawn life_fnc_handleMessage;true};if((call life_adminLevel)>=2) then{if(_code in(actionKeys("User14"))) then{if!(isNull(findDisplay 2900)) then{closeDialog 0;}else{createDialog"life_admin_menu";};};};if(!isNull findDisplay 7300&&!(_code in(actionKeys"User12"))) exitWith{false};if((_code in _interruptionKeys)&&!(isNull life_sittingChair)) then{[life_sittingChair]spawn life_fnc_handleChair;};if(_code in(actionKeys"TacticalView")) exitWith{true;};{if(_code in actionKeys format["CommandingMenu%1",_x]) exitWith{true};}forEach[0,1,2,3,4,5,6,7,8,9];if(_code in actionKeys"NavigateMenu") then{true};if(_code in(actionKeys"Gear")) exitWith{if(player getVariable["ga_restrained",false]) then{["You cannot access your inventory while you're restrained!","basic"]spawn life_fnc_handleMessage;true;};};if(_code in(actionKeys"GetOver")&&speed player>10) exitWith{[]call life_fnc_jump;true;};if(_code in(actionKeys"PushToTalk")||_code in(actionKeys"PushToTalkSide")) exitWith{if(currentChannel in[0,1,6]) then{systemChat format["The Asylum does not allow voice in this channel."];true;};};if(_code in((actionKeys"Diary")+(actionKeys"NetworkPlayers")+(actionKeys"forceCommandingMode")+(actionKeys"menuBack"))) exitWith{true;};if(_code in(actionKeys"SitDown")&&player getVariable["ga_restrained",false]) exitWith{true;};if(_code isEqualTo 41||_code in(actionKeys"SelectAll")||_code in(actionKeys"SwitchCommand")) exitWith{if!(life_targetTag) then{[]spawn{life_targetTag=true;uiSleep 5;life_targetTag=false;};};true;};if(count(actionKeys"User10")!=0&&{(inputAction"User10">0)}) exitWith{if!(life_action_in_use) then{[]spawn{private _handle=[]spawn life_fnc_actionKeyHandler;waitUntil{scriptDone _handle};if(life_action_in_use) then{life_action_in_use=false;};};};true;};if((_code in _functionKeys)&&{scriptAvailable(0.4)}) exitWith{false;};if(_alt&&_code isEqualTo 62) exitWith{if((call life_adminlevel) isEqualTo 0) then{[]spawn{disableUserInput true;uiSleep 2;disableUserInput false;disableUserInput true;disableUserInput false;};_handled=true;};};switch(_code) do{case 1:{if(life_action_in_use) then{life_action_in_use=false;_handled=true;};if(playerSide isEqualTo west&&!isNil"life_trafficCam") then{[-1]call life_fnc_trafficCams;};};case 5:{if(playerSide isEqualTo west&&!isNil"life_trafficCam") then{[-1]call life_fnc_trafficCams;};};case 6:{if(alive player) then{if(player getVariable["ga_restrained",false]&&(call life_adminLevel)<=1) then{["You cannot open your cell phone when you're restrained!","basic"]spawn life_fnc_handleMessage;}else{if!(dialog) then{[]spawn life_fnc_cellphone;};};};};case 9:{if(life_phoneCallStatus isEqualTo 1) then{["answerPhoneCall"]spawn life_fnc_phoneCallClient;};};case 10:{if(life_phoneCallStatus isEqualTo 1) then{["declinePhoneCallReciever"]spawn life_fnc_phoneCallClient;