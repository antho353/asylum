waitUntil{uiSleep 1;isNull(findDisplay 38500)};if!(call life_fnc_isDominationActive) exitWith{};if(player getVariable["ga_inDomination",false]) exitWith{};player setVariable["ga_inDomination",true];(["getLocationData",SRV_dominationID]call life_fnc_dominationCfg) params["",["_dominationPossibleFlagLocations",[],[[]]],["_dominationMarkersArray",[],[[]]],["_dominationSafezones",[],[[]]],["_dominationPoly",[],[[]]]];if(ASY_Server isEqualTo 2) then{setTerrainGrid 50;player enableFatigue false;};private _safezoneTriggers=[];if(_dominationSafezones isNotEqualTo[]) then{{private _xRebelSafeZone=createTrigger["EmptyDetector",getMarkerPos _x,false];_xRebelSafeZone setTriggerArea[350,350,0,false];_xRebelSafeZone setTriggerActivation["ANYPLAYER","PRESENT",true];_xRebelSafeZone setTriggerStatements["((this && ((vehicle player) in thisList)) || (player in thisList))","['You have entered the domination rebel safezone. You are invulnerable until you leave the safezone circle!', 'basic'] spawn life_fnc_handleMessage;","['You have left the domination rebel safezone. You are now vulnerable to damage!', 'basic'] spawn life_fnc_handleMessage;"];_xRebelSafeZone setTriggerInterval 2;_safezoneTriggers pushBack _xRebelSafeZone;}forEach _dominationSafezones;};[]call life_fnc_initDomHUD;private _potHandle=[{if(life_dominationPotCache isNotEqualTo 0) then{if(playerSide isEqualTo west) then{[["addToPrizePool",life_dominationPotCache,[getPlayerUID player,profileName,"SRT",(life_gang_data param[0,-1])]],"TON_fnc_dominationSRV",2]spawn life_fnc_MP;