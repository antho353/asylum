case(life_coprole in["all","medic"]&&{15 in life_cop_talents}):{0.85};case(life_coprole in["all","detective"]&&{31 in life_cop_talents&&!(_unit isEqualTo player)}):{0.75};default{1};};if(468 in life_completedLifetimeQuests&&playerSide isEqualTo civilian) then{_multiplier=_multiplier-0.15;};if(802 in life_completedLifetimeQuests&&playerSide isEqualTo independent) then{_multiplier=_multiplier-0.10;};private _delay=0.2*_multiplier;for"_i"from 0 to 1 step 0 do{uiSleep _delay;_cP=_cP+0.01;_progress progressSetPosition _cP;_pgText ctrlSetText format["%3 (%1%2)...",round(_cP*100),"%",_text];if(!alive player||!alive _unit) exitWith{};if!(isNull objectParent player) exitWith{player action["Eject",vehicle player]};if(isWeaponDeployed player) exitWith{};if(player getVariable["ga_downed",false]) exitWith{};if(player distance _unit>7) exitWith{};if(_cP>=1) exitWith{_success=true;};if!(life_action_in_use) exitWith{};};life_action_in_use=false;player forceWalk false;if!(_animation isEqualTo"AinvPpneMstpSnonWnonDnon_G01") then{[]spawn life_fnc_handleAnim;};5 cutText["","PLAIN"];player playActionNow"stop";if!(_success) exitWith{["Transfusion failed.","basic"]spawn life_fnc_handleMessage;if(_animation isEqualTo"AinvPpneMstpSnonWnonDnon_G01") then{player switchMove"stop"};};private _useBloodBag=switch(true) do{case(life_coprole in["all","medic"]&&21 in life_cop_talents&&(call life_copLevel>=4)):{false};case(life_coprole in["all","medic"]&&{14 in life_cop_talents}):{(random 10)<7.5};case(life_coprole in["all","detective"]&&{32 in life_cop_talents}):{(random 10)<7.5};case(116 in life_side_talents&&call(life_medicLevel)>=4&&floor(random 3) isEqualTo 0):{false};default{true};};if(_useBloodBag&&{!([false,"bloodbag",1]call life_fnc_handleInv)}) exitWith{["You don't have a bloodbag to give!","basic"]spawn life_fnc_handleMessage;};private _damage=0;private _asy_dmg=_unit;["bloodbag",1]call life_fnc_statArrUpdate;if(_unit isEqualTo player) then{_asy_dmg setDamage _damage;titleText["You give yourself a blood transfusion.","PLAIN DOWN"];["action","bloodbagself",1]spawn life_fnc_handleQuest;}else{_asy_dmg setDamage _damage;titleText[format["You gave %1 a blood transfusion.",name _unit],"PLAIN DOWN"];[[0,format["%1 has given you a blood transfusion.",profileName]],"life_fnc_broadcast",_unit]spawn life_fnc_MP;["action","bloodbagothers",1]spawn life_fnc_handleQuest;};[]call life_fnc_hudUpdate;if(playerSide isEqualTo independent) then{life_side_exp=life_side_exp+5;};if(playerSide isEqualTo west&&life_coprole in["all","medic","detective"]&&player!=_unit) then{[100]spawn life_fnc_earnPrestige};