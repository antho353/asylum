private _progress=_ui displayCtrl 38201;private _pgText=_ui displayCtrl 38202;_pgText ctrlSetText format["%2 (1%1)...","%",_text];_progress progressSetPosition 0.01;private _cP=0.01;private _success=false;private _pos=getPos player;for"_i"from 0 to 1 step 0 do{uiSleep 0.3;_cP=_cP+0.01;_progress progressSetPosition _cP;_pgText ctrlSetText format["%3 (%1%2)...",round(_cP*100),"%",_text];private _friendlyInArea=allPlayers select{(_x distance2D(getMarkerPos"gang_fortress_marker")<=3500)&&((group _x isEqualTo(group player))||((_x getVariable["gang_data",[-1]]select 0) isEqualTo _playerGangID))};if(count _friendlyInArea>_maxPlayers) exitWith{[format["The Gang Fortress can't be captured with more than %1 players 3.5 km from the center of the flag!",_maxPlayers],"basic"]spawn life_fnc_handleMessage;};if(player distance _pos>8||life_isDowned||player getVariable["ga_restrained",false]||!alive player) exitWith{};if!((_captureFlagObj getVariable["ga_gang_fortress_data",[-1,"Unknown",false,"Unknown",grpNull]]) param[2,false]) exitWith{};if!(isNull objectParent player) exitWith{};if(_cP>=1) exitWith{_success=true;};};life_capturingCartel=false;5 cutText["","PLAIN"];if!(_success) exitWith{};private _allGangMembers=allPlayers select{(_x getVariable["gang_data",[-1]]param[0,-1]) isEqualTo _playerGangID};private _gangMembersFlag=_allGangMembers select{_captureFlagObj distance _x<=20};private _warzonePlayers=allPlayers select{(_x distance2D(getMarkerPos"gang_fortress_marker")<=2000)};_captureFlagObj setVariable["ga_gang_fortress_data",[_playerGangID,_playerGangName,true,profileName,group player],true];"gang_fortress_marker"setMarkerText format["%1 - %2 (Contested)",_defaultFlagName,_playerGangName];[[4,format["The Gang Fortress has been captured by %1!",_playerGangName]],"life_fnc_broadcast",_warzonePlayers]spawn life_fnc_MP;[[format["%1 has captured the Gang Fortress for %2. Hold this flag for as long as you can!",profileName,_playerGangName],"basic"],"life_fnc_handleMessage",_allGangMembers]spawn life_fnc_MP;["gangfortresscapped",1]call life_fnc_statArrUpdate;