if(_cP>=1) exitWith{};if(player distance _vehicle>10) exitWith{};if!(life_action_in_use) exitWith{};if!(alive player) exitWith{};if({_vehicle distance getMarkerPos format["oil_%1",_x]<150}count[1,2,3,4,5]isEqualTo 0) exitWith{_exit=true};if((speed _vehicle)>0) exitWith{_exit=true};if!(alive _vehicle) exitWith{_exit=true};if(isNull _vehicle) exitWith{_exit=true};[_vehicle,1200]call life_fnc_setVehicleIdle;if!(_vehicle getVariable["ga_oilPump",false]) exitWith{};};5 cutText["","PLAIN"];life_is_processing=false;life_action_in_use=false;[_vehicle,1200]call life_fnc_setVehicleIdle;if(_exit) exitWith{_vehicle setVariable["ga_oilPump",false,true];_vehicle enableRopeAttach true;["The oil drilling has failed. You must set up the pump again.","basic"]spawn life_fnc_handleMessage;};private _itemRow=["getItemRow","oilu"]call life_fnc_virtItemCfg;private _oilWeight=_itemRow select 2;private _weightFilled=floor(_cP*_vehicleWeight);private _qtyFilled=floor(_weightFilled/_oilWeight);private _newWeight=_oilWeight*_qtyFilled;private _index=_currentItems findIf{(_x select 0) isEqualTo"oilu"};if(_index isEqualTo-1) then{_currentItems pushBack["oilu",_qtyFilled];}else{(_currentItems select _index) set[1,_qtyFilled];};_vehicle setVariable["ga_vinv",[_currentItems,_newWeight],true];titleText[format["You have drilled for oil and your vehicle now contains %1 units of unprocessed oil!",[_qtyFilled]call life_fnc_numberText],"PLAIN"];