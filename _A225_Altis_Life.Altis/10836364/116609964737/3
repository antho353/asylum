#include"..\..\macro.h"
if(scriptAvailable(0.5)) exitWith{};private"_handle";private _curTarget=cursorObject;if(life_action_in_use) exitWith{};if(life_interrupted) exitWith{life_interrupted=false;};if(player distance _curTarget>20) exitWith{};private _isWater=surfaceIsWater(getPosASL player);if(isNull _curTarget) exitWith{if(_isWater) then{private _fish=(nearestObjects[getPos player,["Fish_Base_F"],3]) select 0;if(!isNil"_fish") then{[_fish]call life_fnc_catchFish;};}else{if(playerSide isEqualTo civilian&&!life_action_gathering) then{if(surfaceIsWater position player) then{_handle=[]spawn life_fnc_gatherWater;}else{_handle=[]spawn life_fnc_ga1ther;};waitUntil{scriptDone _handle};life_action_gathering=false;};};};if(_curTarget isKindOf"House_F"&&{player distance _curTarget<20}) exitWith{[_curTarget]call life_fnc_houseMenu;};if(dialog) exitWith{};if(vehicle player!=player) exitWith{};life_action_in_use=true;[]spawn{uiSleep 60;life_action_in_use=false;};if(life_inv_defib>0&&_curTarget isKindOf"CAManBase"&&!(alive _curTarget)&&_curTarget getVariable["ga_revivable",false]&&(98 in life_side_talents||!(playerSide isEqualTo west))) exitWith{[_curTarget]call life_fnc_revivePlayer;