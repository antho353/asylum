if(life_clothing_purchase isEqualTo[0,0,0,0]) exitWith{titleText["You didn't choose the clothes you wanted to buy","PLAIN"]};private _oldLoadout=parseSimpleArray format["%1",_this select 0];if!(_oldLoadout isEqualType[]) exitWith{};_oldLoadout params["_type","_oldUniform","_oldHeadgear","_oldGlasses","_oldVest","_oldBackpack"];private _price=0;private _exit=false;private _needCashItems=["V_HarnessOGL_brn"];private _currencyVar=if!(life_bloodMoneyShop) then{life_cash}else{life_bloodMoney};private _currency=if!(life_bloodMoneyShop) then{"cash"}else{"Blood Money"};private _govTaxed=["civ","cop","skip","dive","copdive","kart","barber","faces","med"];{if!(_x isEqualTo 0) then{_price=_price+_x}}forEach life_clothing_purchase;private _currencyText=if!(life_bloodMoneyShop) then{format["$%1",[_price]call life_fnc_numberText]}else{format["%1",[_price]call life_fnc_numberText]};if(_type=="rebcloth") then{private _pointData=arms_flag getVariable["ga_capData",[0,"Neutral",-1]];_pointData params["_flagGangID","","_progress"];if(_flagGangID isEqualTo 0) exitWith{};life_armsCartel=[false,0,_flagGangID];if((count life_gang_data)>0) then{if((_flagGangID isEqualTo(life_gang_data select 0))&&(_progress>=0)) then{life_armsCartel set[0,true];};};};{private _oldItem=switch(_x) do{case(uniform player):{_oldUniform};case(headgear player):{_oldHeadgear};case(goggles player):{_oldGlasses};case(vest player):{_oldVest};case(backpack player):{_oldBackpack};default{_x};};if((_x in _needCashItems)&&!(_oldItem isEqualTo _x)&&(_currencyVar<_price)) exitWith{[format["You do not have enough %1 on you to pay for this. You need %2.",_currency,_currencyText],"basic"]spawn life_fnc_handleMessage;_exit=true;};}forEach[vest player,uniform player,backpack player,headgear player];if(_exit) exitWith{closeDialog 0};if!(life_bloodMoneyShop) then{if!([_price]call life_fnc_debitCard) exitWith{_exit=true};}else{if(life_bloodMoney<_price) exitWith{_exit=true};private _bmCost=_price;life_bloodMoney=life_bloodMoney-_bmCost;};if(_exit) exitWith{closeDialog 0;if(life_bloodMoneyShop) then{[format["You do not have enough Blood Money to pay for this. You need %1.",_price],"basic"]spawn life_fnc_handleMessage};};if((call life_fnc_isDominationActive)&&([player]call life_fnc_inDomSafezone)&&((call life_adminLevel)<3)) then{life_dominationPotCache=life_dominationPotCache+_price;[format["This purchase has added $%1 to the domination event prize pool!",[_price]call life_fnc_numberText]]spawn life_fnc_handleMessage;};private _rebelOutposts=["Rebelop_1","Rebelop_2","Rebelop_3","Rebelop_4","Rebelop_5","Rebelop_6"];if!(({player distance(getMarkerPos _x)<=200}count _rebelOutposts) isEqualTo 0) then{["moneyspentrebel",_price]call life_fnc_statArrUpdate;