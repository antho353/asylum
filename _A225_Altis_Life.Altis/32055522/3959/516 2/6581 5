params["","","",["_target",objNull,[objNull]]];private _unit=cursorTarget;if(_target isEqualTo player) then{_unit=player};if(isNull _unit||!(_unit isKindOf"CAManBase")||!(isPlayer _unit)||!(alive _unit)) exitWith{["Not a valid target for first aid kit.","basic"]spawn life_fnc_handleMessage};if(player distance _unit>6||life_action_in_use) exitWith{};if!(isNull objectParent player) exitWith{["You can't first aid from within a vehicle.","basic"]spawn life_fnc_handleMessage};if("medic"in(toLower(animationState player))) exitWith{["You are currently already using a first aid kit!","basic"]spawn life_fnc_handleMessage;};if(toLower(animationState player) in["amovpercmstpsnonwnondnon_amovpknlmstpsnonwnondnon","amovpercmstpsraswpstdnon_amovpknlmstpsraswpstdnon","amovpercmstpsraswrfldnon_amovpknlmstpsraswrfldnon","amovpknlmstpsraswlnrdnon_amovpknlmstpsnonwnondnon"]) exitWith{};life_action_in_use=true;private _success=false;private _text=format["First Aiding %1",name _unit];disableSerialization;5 cutRsc["life_progress","PLAIN"];private _ui=uiNamespace getVariable["life_progress",displayNull];private _progress=_ui displayCtrl 38201;private _pgText=_ui displayCtrl 38202;_pgText ctrlSetText format["%2 (1%1)...","%",_text];_progress progressSetPosition 0.01;private _cP=0.01;player forceWalk true;private _animation=switch(true) do{case((_unit isEqualTo player)&&(stance player isEqualTo"PRONE")):{"AinvPpneMstpSlayWnonDnon_medic"};case(_unit isEqualTo player):{"Medic"};default{"MedicOther"};};if(_animation isEqualTo"AinvPpneMstpSlayWnonDnon_medic") then{player playMoveNow _animation}else{player playActionNow _animation;};private _delay=0.073;private _disallowedAnimationStates=["aovrpercmstpsraswrfldf","AovrPercMrunSrasWrflDf","aovrpercmstpsraswpstdf"]apply{toLower _x};for"_i"from 0 to 1 step 0 do{uiSleep _delay;_cP=_cP+0.01;_progress progressSetPosition _cP;