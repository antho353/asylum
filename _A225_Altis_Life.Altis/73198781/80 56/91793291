}else{[["-KILLED-",_killer,name _killer,format["(%5) killed %1 (%2) (%6) with a %3, Ammo: %9/%10, DIST: %4m. Killer: %7, Dead: %8, In War: %11",_unitName,_unitPlayerID,_weaponDisplayName,floor(_unit distance _killer),side _killer,playerSide,getpos _killer,getPos _unit,_killer ammo _killerWeapon,_magCapacity,_isAtWar]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;};};default{[["-KILLED-",_unit,_unitName,format["was killed. Dead: %1",getPos _unit]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;};};if(call life_fnc_isDominationActive) then{if(life_dominationGulagData param[2,false]) exitWith{if(getPlayerUID _killer in SRV_dominationGulagPlayers) then{[["wonGulag",[]],"life_fnc_dominationGulag",_killer]spawn life_fnc_MP;["lostGulag",[]]spawn life_fnc_dominationGulag;};};private _isKillerCiv=side _killer isEqualTo civilian;private _notInOurGang=((_killer getVariable["gang_data",[-1]]param[0,-1]) isNotEqualTo(life_gang_data param[0,0]));private _isOfficers=((side _killer isEqualTo west)&&(playerSide isEqualTo west));life_dominationGulagData=+[life_dead_gear,getPosATL _unit,false];if(_unit isNotEqualTo _killer&&_notInOurGang&&!_isOfficers&&((getPos _killer inPolygon life_dominationPoly)&&(getPos _unit inPolygon life_dominationPoly))) then{private _hotZoneBonus=((_unit inArea"domination_hotzone")&&(_killer inArea"domination_hotzone"));private _hardPointBonus=((_unit inArea"domination_hardpoint")&&(_killer inArea"domination_hardpoint"));private _distanceBonus=((_killer distance2D _unit)>=200);private _heightBonus=((getPosATL(vehicle _unit) param[2,0])>=100);private _isHVTbonus=(_killer getVariable["ga_domination_HVT",[false,false,-1,"",objNull]]param[0,false]);private _killstreakBonus=((_killer getVariable["ga_domKillstreak",0])>=3);private _rippedArmor=(!(isNull objectParent player)&&((typeOf vehicle player) in["O_MRAP_02_F","B_MRAP_01_F","I_MRAP_03_F"]));private _bonusType=if!(_isKillerCiv) then{"money"}else{"blood money"};private _isHeadshot=[_unit]call _isHeadshotFnc;life_lastKiller=getPlayerUID _killer;private _bonusType=switch(true) do{case(_distanceBonus):{"distance"};case(_hotZoneBonus):{"hotzone"};case(_heightBonus):{"height"};case(_isHVTbonus):{"hvt"};case(_hardPointBonus):{"hardpoint"};default{""};};_killerRemoteStats pushBack[0,0,false,[[11,1,(_distanceBonus||_hotZoneBonus||_heightBonus||_isHVTbonus||_hardPointBonus),[],[_bonusType,(_killer distance2D _unit),profileName,_rippedArmor,getPlayerUID _killer,_isHeadshot,(side _unit isEqualTo west),objectParent _unit,(_unit getVariable["ga_domPing",0]>=100),_isHVTbonus]],[5,5]]];[0,0,false,[[10,1],[5,-5]]]call life_fnc_updateRemoteStat;if(_isKillerCiv&&(_unit getVariable["ga_domination_HVT",[false,false,-1,"",objNull]]param[0,false])) then{[["killedHVT",[_killer,_unit]],"life_fnc_dominationMission",_killer]spawn life_fnc_MP;};};};removeAllWeapons player;private _clear=nearestObjects[_unit,["WeaponHolderSimulated"],3];{deleteVehicle _x}forEach _clear;"RadialBlur"ppEffectEnable false;disableUserInput false;if!(_unit getVariable["ga_name",""]isEqualTo profileName) then{_unit setVariable["ga_name",profileName,true]};if!(_unit getVariable["ga_group",grpNull]isEqualTo(group player)) then{_unit setVariable["ga_group",group player,true]};_unit setVariable["ga_revivable",false,true];{if!(isNil{_unit getVariable[_x,nil]}) then{_unit setVariable[_x,nil,true];};}forEach["ga_restrained","ga_escorting","ga_transporting","ga_can_revive","ga_disarmed"];if!(isNull life_escort) then{[]call life_fnc_stopEscorting;};if(playerSide isEqualTo west) then{private _spawnPoints=([playerSide]call life_fnc_spawnPointCfg) apply{_x select 0};_spawnPoints deleteAt 0;private _nearSPIdx=_spawnPoints findIf{_unit distance(getMarkerPos _x)<=100};if!(_nearSPIdx isEqualTo-1) then{(_spawnPoints select _nearSPIdx) spawn{life_disabled_spawns pushBackUnique _this;uiSleep 120;life_disabled_spawns=life_disabled_spawns-[_this];};};};if!(_killerRemoteStats isEqualTo[]) then{[[0,0,false,_killerRemoteStats],"life_fnc_updateRemoteStat",_killer]spawn life_fnc_MP;};if!(_killerStatArr isEqualTo[]) then{[["",-1,_killerStatArr],"life_fnc_statArrUpdate",_killer]spawn life_fnc_MP;};_unit spawn{waitUntil{!dialog};uiSleep 0.25;createDialog"DeathScreen";(findDisplay 7300) displaySetEventHandler["KeyDown","(_this select 1) isEqualTo 1"];[]spawn life_fnc_deathScreen;disableSerialization;private _timer=(findDisplay 7300) displayCtrl 7301;private _respawnBtn=(findDisplay 7300) displayCtrl 7302;private _maxTime=time+(life_respawn_timer*60);_respawnBtn ctrlEnable false;waitUntil{_timer ctrlSetStructuredText parseText format["<t align='center'>Respawn Available in: %1</t>",[_maxTime-time,"MM:SS"]call BIS_fnc_secondsToString];round(_maxTime-time)<=0||isNull _this };_respawnBtn ctrlEnable true;_timer ctrlSetStructuredText parseText"<t align='center'>You can now respawn</t>";private _medic="";private _medicName="";private _maxTime=time+(life_death_timer*60);waitUntil{if!(isNull life_medic_enroute) then{_medicName=if(side life_medic_enroute isEqualTo west) then{format["APD Medic %1",name life_medic_enroute]}else{format["AFD Medic %1",name life_medic_enroute]};_medic=format["%1 is en-route!<br/>",_medicName];if((!isNull life_medic_enroute)&&!(alive life_medic_enroute)) then{[format["%1 was killed enroute, you may respawn or request a new medic!",_medicName],"basic"]spawn life_fnc_handleMessage;player setVariable["ga_medRequest",false];life_medic_enroute=objNull;_medic="";};if(player getVariable["ga_medRequest",false]) then{_respawnBtn ctrlEnable false;}else{_respawnBtn ctrlEnable true;};};_timer ctrlSetStructuredText parseText format["<t align='center'>%2You will bleed to death in: %1</t>",[_maxTime-time,"MM:SS"]call BIS_fnc_secondsToString,_medic];(round(_maxTime-time)<=0)||isNull _this||life_respawned };if(!isNull _this&&!(life_respawned)) then{life_respawned=true;[]call life_fnc_doRespawn;};};[_unit]call life_fnc_deathCamera;asyv_hunger=100;asyv_thirst=100;life_carryWeight=0;if(player getVariable["ga_domKillstreak",0]>=1) then{player setVariable["ga_domKillstreak",0,true]};if!(isNil"life_actions") then{{_unit removeAction _x;}forEach life_actions;life_actions=[];};if!(playerSide isEqualTo civilian) then{[0]call life_fnc_ClupdatePartial;};