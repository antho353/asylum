#include"..\..\macro.h"
if(scriptAvailable(2)) exitWith{["Please don't spam item drops!","basic"]spawn life_fnc_handleMessage;};if((life_is_processing)&&(life_action_in_use)) exitWith{["You cannot drop items while processing!","basic"]spawn life_fnc_handleMessage;true};if(((getPosASL player) select 2)<0) exitWith{["You cannot drop items while under water!","basic"]spawn life_fnc_handleMessage;true};if(((time-life_last_transfer)<3)) exitWith{["You can only drop items once per 3 seconds. Try dropping more at a time.","basic"]spawn life_fnc_handleMessage;true};if(!(isNull objectParent player)&&!(objectParent player isKindOf"Ship")) exitWith{["You cannot drop items from inside a vehicle!","basic"]spawn life_fnc_handleMessage;true};if(player getVariable["ga_restrained",false]) exitWith{["You cannot drop items while restrained!","basic"]spawn life_fnc_handleMessage;true};if(isOnRoad player&&((life_is_arrested select 0) isEqualTo 0)) exitWith{["Littering on the road is not acceptable!","basic"]spawn life_fnc_handleMessage;true};private _nearbyCases={!((_x getVariable["ga_droppedItems",[]]) isEqualTo[])&&(isNull(_x getVariable["ga_inUse",objNull]))}count(nearestObjects[player,[],4]);if(_nearbyCases>=3) exitWith{["Please make a suitcase pile elsewhere or wait for a nearby case to not be in use by other people.","basic"]spawn life_fnc_handleMessage;true};private _shortName=lbData[361001,lbCurSel 361001];private _playerTypedDropAmount=parseNumber(ctrlText 361002);private _itemMax=missionNamespace getVariable(format["life_inv_%1",_shortName]);if(isNil"_itemMax") exitWith{["You can't drop this item!","basic"]spawn life_fnc_handleMessage;