params[["_ret",[],[[]]],["_jailSpawn","jail_marker2",[""]],["_jailRelease","jail_release2",[""]]];_ret params[["_name","",[""]],["_PID","",[""]],["_crimes",[],[[]]],["_bounty",1500,[0]]];private _charges=A_stats_crimes select[1,count A_stats_crimes];private _chargeTimes=["getChargeTimes"]call life_fnc_wantedChargesConfig;private _deathPenMinimum=100000;private _jailTime=0;{if(_x>0) then{_jailTime=_jailTime+((_chargeTimes select _forEachIndex)*_x)};}forEach _charges;life_is_arrested set[0,1];life_is_arrested set[1,_bounty];if((life_is_arrested select 2) isEqualTo 0) then{life_is_arrested set[2,_jailTime]};life_bail_paid=false;life_breakout=false;life_bail_amount=_bounty;private _jailSpawnPos=getMarkerPos _jailSpawn;private _jailReleasePos=getMarkerPos _jailRelease;player setPosATL _jailSpawnPos;closeDialog 0;[false]call life_fnc_seizePlayerIllegalAction;[5]call life_fnc_ClUpdatePartial;[0]call life_fnc_virtItemCfg;if!(isNil{player getVariable["ga_blinded",nil]}) then{player setVariable["ga_blinded",nil]};removeVest player;removeHeadgear player;removeBackpack player;private _asy_dmg=player;_asy_dmg setDamage 0;player forceAddUniform"U_C_Scientist";[]spawn{uiSleep 0.5;[uniform player,"setIdx",28]call life_fnc_clothingTextures;};private _bail=false;private _toServeTime=selectMin[life_is_arrested select 2,1500*1];private _startTime=time;life_jailReleaseTime=round(_startTime+_toServeTime);private _jailTimerSync=time+300;disableSerialization;4 cutRsc["life_progress","PLAIN"];private _display=uiNameSpace getVariable["life_progress",displayNull];private _progressBar=_display displayCtrl 38201;private _progressText=_display displayCtrl 38202;_progressText ctrlSetText"Time to collect";_progressBar progressSetPosition 1;private["_timeRemaining","_isSeconds"];while{(life_is_arrested select 0) isEqualTo 1}do{if(life_jailReleaseTime>time) then{_timeRemaining=toArray([life_jailReleaseTime-time,"MM:SS"]call BIS_fnc_secondsToString);if((_timeRemaining select 0) in[48]) then{_timeRemaining deleteAt 0};_isSeconds=(_timeRemaining select 0) in[48];_timeRemaining=toString _timeRemaining;_progressText ctrlSetText format["Time remaining: %1 %2",_timeRemaining,if(_isSeconds) then{"seconds"}else{"minutes"}];