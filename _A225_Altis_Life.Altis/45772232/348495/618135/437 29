}else{deleteMarkerLocal format["phouse_%1",_building getVariable"ga_houseID"];};_building setVariable["ga_houseID",nil,true];_building setVariable["ga_homeOwner",nil,true];if(ASY_Server isEqualTo 2) then{life_atmcash=life_atmcash+_buyPrice;}else{life_atmcash=life_atmcash+_sellPrice;};life_atmcashCache=((life_atmcash/4)+5);[6]call life_fnc_ClupdatePartial;private _index=life_vehicles find _building;if!(_index isEqualTo-1) then{life_vehicles set[_index,-1];life_vehicles=life_vehicles-[-1];};_index=[str(getPosATL _building),life_houses]call life_fnc_index;if!(_index isEqualTo-1) then{life_houses set[_index,-1];life_houses=life_houses-[-1];};[format["The bank has purchased your house for $%1. The money has been added to your bank account.",[_sellPrice]call life_fnc_numberText],"basic"]spawn life_fnc_handleMessage;};case 3:{private _tax=round(_buyPrice*(call life_fnc_getGovTax));[format["The realtor group has denied your purchase as this home is already owned. The $%1 used to purchase the home has been added back to your bank balance.",[_buyPrice+_tax]call life_fnc_numberText],"basic"]spawn life_fnc_handleMessage;life_atmcash=life_atmcash+(_buyPrice+_tax);life_atmcashCache=((life_atmcash/4)+5);[6]call life_fnc_ClupdatePartial;};case 4:{[format["Your house on the market has sold to another player for $%1. Ownership is now transfering and the money has been deposited in to your account.",[_marketPrice]call life_fnc_numberText],"basic"]spawn life_fnc_handleMessage;life_atmcash=life_atmcash+_marketPrice;life_atmcashCache=((life_atmcash/4)+5);[6]call life_fnc_ClupdatePartial;if!(_gangid isEqualTo-1) then{deleteMarkerLocal life_gangBldgMark;life_gangBldgMark="";}else{deleteMarkerLocal format["phouse_%1",_building getVariable"ga_houseID"];};private _index=life_vehicles find _building;if!(_index isEqualTo-1) then{life_vehicles set[_index,-1];life_vehicles=life_vehicles-[-1];};_index=[str(getPosATL _building),life_houses]call life_fnc_index;if!(_index isEqualTo-1) then{life_houses set[_index,-1];life_houses=life_houses-[-1];};};case 5:{life_vehicles pushBack _building;life_houses pushBack[(str(getPosATL _building)),[]];private _marker=createMarkerLocal[format["phouse_%1",(_building getVariable"ga_houseID")],getPosATL _building];_marker setMarkerTextLocal getText(configFile>>"CfgVehicles">>(typeOf _building)>>"displayName");_marker setMarkerShapeLocal"ICON";_marker setMarkerColorLocal"ColorBlue";_marker setMarkerTypeLocal"mil_end";private _tax=round(_buyPrice*(call life_fnc_getGovTax));[format["Your house purchase has finished! The keys have been added to your keychain. You paid a total of $%1, including a tax of $%2",[_buyPrice+_tax]call life_fnc_numberText,[_tax]call life_fnc_numberText],"basic"]spawn life_fnc_handleMessage;["payGovernor",[_tax]]spawn life_fnc_govSystem;};};