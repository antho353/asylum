private _markers=[];private _deadUnits=[];private _marker="";private _name="";private _down=false;private _vehicleName="";addMissionEventHandler["Map",{params["_mapIsOpened","_mapIsForced"];private _isDomActive=call life_fnc_isDominationActive;if(_mapIsOpened) then{life_mapMarkers=[];_markers=life_mapMarkers;{if!(isNull _x) then{_vehicleName=getText(configFile>>"CfgVehicles">>typeOf _x>>"displayName");_marker=createMarkerLocal[format["%1_marker",_x],getPos _x];_marker setMarkerColorLocal"ColorGreen";_marker setMarkerTypeLocal"Mil_destroy";_marker setMarkerTextLocal format["%1",_vehicleName];_markers pushBack[_marker,_x];};}forEach life_tracked;if(((serverTime-serverStartTime)<600)&&!(_isDomActive)) then{{if!(_x in life_tracked) then{_vehicleName=getText(configFile>>"CfgVehicles">>typeOf _x>>"displayName");_marker=createMarkerLocal[format["%1_marker",_x],getPos _x];_marker setMarkerColorLocal"ColorGreen";_marker setMarkerTypeLocal"mil_dot";_marker setMarkerTextLocal format["%1%2","Owned Vehicle - ",_vehicleName];_markers pushBack[_marker,_x];};}forEach(life_vehicles select{!isNull _x&&{alive _x&&(_x isKindOf"Car"||_x isKindOf"Air"||_x isKindOf"Ship")}});};if(playerSide isEqualTo west&&{life_coprole in["medic","all"]}) then{_deadUnits=allDeadMen select{_x getVariable["ga_revivable",false]&&!(isNil{_x getVariable"ga_name"})};{_marker=createMarkerLocal[format["%1_dead_marker",_x],visiblePosition _x];_marker setMarkerColorLocal"ColorRed";_marker setMarkerTypeLocal"loc_Hospital";_marker setMarkerTextLocal format["%1 Unconscious",_x getVariable["ga_name","Unknown Player"]];_markers pushBack[_marker,_x];}forEach _deadUnits;};if(playerSide isEqualTo civilian&&{71 in life_side_talents}) then{{if((_x getVariable["ga_group",grpNull]) isEqualTo group player) then{_marker=createMarkerLocal[format["%1_groupDead_marker",_x],visiblePosition _x];_marker setMarkerColorLocal"ColorRed";_marker setMarkerTypeLocal"loc_Hospital";_marker setMarkerTextLocal format["%1 Unconscious",_x getVariable["ga_name","Unknown Player"]];_markers pushBack[_marker,_x];};}forEach allDeadMen;};if!(_isDomActive) then{{if(_x isEqualTo player) then{_marker=createMarkerLocal[format["%1_marker",_x],getPosWorld _x];_marker setMarkerColorLocal"ColorBlue";_marker setMarkerTypeLocal"mil_arrow2";_marker setMarkerTextLocal"YOU";_marker setMarkerDirLocal(getDir _x);_markers pushBack[_marker,_x];}else{if(playerSide isEqualTo west&&side _x isEqualTo west&&!(_x getVariable["ga_blinded",false])) then{_marker=createMarkerLocal[format["%1_marker",_x],getPosWorld _x];_marker setMarkerColorLocal"ColorBlue";_marker setMarkerTypeLocal"Mil_dot";_marker setMarkerTextLocal format["%1",name _x];_markers pushBack[_marker,_x];};if(!(playerSide isEqualTo west)&&!(side _x isEqualTo west)&&!(_x getVariable["ga_blinded",false])&&!(_x getVariable["ga_restrained",false])&&!life_inEvent) then{if(!isNull(group player)) then{if(group player isEqualTo group _x) then{_marker=createMarkerLocal[format["%1_marker",_x],getPosWorld _x];