closeDialog 0;};private _pullFee=_vehCfgRow select 9;if(playerSide isEqualTo independent&&_classname isKindOf"Air"&&806 in life_completedLifetimeQuests) then{_pullFee=_pullFee*0.50};private _exit=false;private _isProperty=_spawnPoint isKindOf"House_F";if(!_isProperty&&!(_pullFee isEqualTo 0)) then{if!([_pullFee]call life_fnc_debitCard) exitWith{_exit=true;};};if(_exit) exitWith{closeDialog 0;};private _exit=false;if(_spawnPoint isKindOf"House_F") then{if(typeOf _spawnPoint isEqualTo"Land_i_Shed_Ind_F"&&_classname isEqualTo"B_Truck_01_box_F") exitWith{_exit=true};if(_classname in["C_Van_01_box_F","C_Van_01_fuel_F","C_Van_01_transport_F","B_Truck_01_box_F","B_Truck_01_transport_F","B_Truck_01_fuel_F","I_Truck_02_covered_F","I_Truck_02_transport_F","O_Truck_03_device_F"]&&!(typeOf _spawnPoint isEqualTo"Land_i_Shed_Ind_F")) exitWith{_exit=true};};private _flickExit=false;if(_spawnPoint isEqualType objNull&&{playerSide isEqualTo civilian&&!("VR_"in typeOf _spawnPoint)}) then{if(!(_spawnPoint in life_vehicles)&&!(_spawnPoint in life_gangBuilding)) then{if!([cursorObject,getPlayerUID player,"accessLock"]call life_fnc_keyHolderStatus) then{_flickExit=true};};};if(_flickExit) exitWith{closeDialog 0;["You must be looking at your building to pull out a vehicle!","basic"]spawn life_fnc_handleMessage;};private _vehName=([_classname]call life_fnc_fetchCfgDetails) select 1;if(_exit) exitWith{[format["%1 is too large for this garage.",_vehName],"basic"]spawn life_fnc_handleMessage;};closeDialog 0;private _markerPos=if(_spawnPoint isEqualType objNull) then{getPosATL _spawnPoint}else{getMarkerPos _spawnPoint};if(_spawnPoint isKindOf"House_F") then{if(typeOf _spawnPoint=="Land_i_Shed_Ind_F") then{_markerPos=_spawnPoint modelToWorld[4,4,-0.5];}else{_markerPos set[2,(getPosATL _spawnPoint select 2)+0.155541];};}else{_markerPos set[2,(_markerPos select 2)+1.5];};private _vehicle=createVehicle[_classname,[random 999,random 999,999],[],0,"CAN_COLLIDE"];waitUntil{!isNil"_vehicle"&&{!isNull _vehicle}};[[player,_plate,_vehicle],"TON_fnc_vehicleSetActive",2]call life_fnc_MP;_vehicle lock true;_vehicle allowDamage false;if(_spawnPoint in[civ_air_hs_1,civ_air_carrier_1,civ_air_carrier_2,civ_air_carrier_3]) then{_vehicle setPosATL _markerPos}else{_vehicle setPos _markerPos};if(_spawnPoint isEqualType objNull) then{_vehicle setDir([((direction _spawnPoint)-90),direction _spawnPoint]select("VR"in typeOf _spawnPoint))}else{_vehicle setDir(markerDir _spawnPoint)};if((call life_fnc_isDominationActive)&&([player]call life_fnc_inDomSafezone)&&((call life_adminLevel)<3)) then{life_dominationPotCache=life_dominationPotCache+_pullFee;[format["The garage fee for your %1 has added $%2 to the domination event prize pool!",getText(configFile>>"CfgVehicles">>_classname>>"displayName"),[_pullFee]call life_fnc_numberText],"basic"]spawn life_fnc_handleMessage;titletext["Your vehicle is on a 1 minute despawn timer while inside the safezone, so get inside quickly!","PLAIN"];};private _rebelOutposts=["Rebelop_1","Rebelop_2","Rebelop_3","Rebelop_4","Rebelop_5","Rebelop_6"];if!(({player distance(getMarkerPos _x)<=200}count _rebelOutposts) isEqualTo 0) then{["moneyspentrebel",_pullFee]call life_fnc_statArrUpdate;};[format["Your %1 is ready on the spawn point!",getText(configFile>>"CfgVehicles">>_classname>>"displayName")],"basic"]spawn life_fnc_handleMessage;[["-VEHICLEPULL-",player,(profileName),format["pulled a %1 (%2), POS: %3",getText(configFile>>"CfgVehicles">>_classname>>"displayName"),_plate,(getPos player)]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;if(_classname isKindOf"Air") then{["action","garagepullaircraft",1]call life_fnc_handleQuest;};[_vehicle]call life_fnc_clearVehicleAmmo;clearItemCargoGlobal _vehicle;clearBackpackCargoGlobal _vehicle;uiSleep 1;[_vehicle,_mods,_color,_customPlate,_vehWear,false]spawn life_fnc_prepareVehicle;_vehicle setVariable["ga_dbInfo",[getPlayerUID player,_plate],true];