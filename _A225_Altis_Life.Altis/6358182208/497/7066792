#include"..\..\macro.h"
if(scriptAvailable(4)) exitWith{["Please wait a few seconds before trying to send money again!","basic"]spawn life_fnc_handleMessage;uiSleep 4;ctrlEnable[2705,true];};if((lbCurSel 2703) isEqualTo-1) exitWith{["You need to select someone to transfer the money to.","basic"]spawn life_fnc_handleMessage;ctrlEnable[2705,true];};private _unit=allPlayers param[allPlayers findIf{(lbData[2703,lbCurSel 2703]) isEqualTo(_x getVariable["ga_steamid",getPlayerUID _x])},objNull];if(isNull _unit) exitWith{ctrlEnable[2705,true];};if(isNil"_unit") exitWith{["The player selected doesn't seem to exist?","basic"]spawn life_fnc_handleMessage;ctrlEnable[2705,true];};if((_unit distance(getMarkerPos"Respawn_west")<1000)||!(alive _unit)) exitWith{["This player is dead. Try again soon.","basic"]spawn life_fnc_handleMessage;};if((life_cashCache!=((life_cash/4)+7))||(life_atmcashCache!=((life_atmcash/4)+5))) exitWith{[["-HACKEDMONEY-",player,profileName,format["File: %1 - money tampering attempted! Cash: %2 - Expected cash: %3 | Bank: %4 - Expected bank: %5.",_fnc_scriptName,[life_cash]call life_fnc_numberText,[((life_cashCache-7)*4)]call life_fnc_numberText,[life_atmCash]call life_fnc_numberText,[((life_atmCashCache-5)*4)]call life_fnc_numberText]],"TON_fnc_logIt",2]spawn life_fnc_MP;[[profileName,"Attempting to hack money variable."],"life_fnc_notifyAdmins",-2,false]spawn life_fnc_MP;["MemHackCash",false,false]call compile PreProcessFileLineNumbers"\a3\functions_f\Misc\fn_endMission.sqf";};private _val=parseNumber(ctrlText 2702);if!([str _val]call life_fnc_isNumber) exitWith{["Invalid number.","basic"]spawn life_fnc_handleMessage;};if(_val>999999) exitWith{["You can't transfer more than $999,999 at a time.","basic"]spawn life_fnc_handleMessage;ctrlEnable[2705,true];};if(_val<100) exitWith{["You cannot transfer less than $100."]spawn life_fnc_handleMessage;ctrlEnable[2705,true];};if(_val>life_atmcash) exitWith{[format["You do not have enough money in your bank account, to transfer $%1.",_val],"basic"]spawn life_fnc_handleMessage;