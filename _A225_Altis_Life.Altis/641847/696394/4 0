params[["_veh",objNull,[objNull]],["_isVirtual",true,[true]]];if(isNull _veh||!alive _veh) exitWith{closeDialog 0;};disableSerialization;private _tInv=(findDisplay 4500) displayCtrl 4502;private _pInv=(findDisplay 4500) displayCtrl 4503;private _storeBtn=(findDisplay 4500) displayCtrl 4508;private _takeBtn=(findDisplay 4500) displayCtrl 4507;private _pEdit=(findDisplay 4500) displayCtrl 4506;private _tEdit=(findDisplay 4500) displayCtrl 4505;private _pDropBtn=(findDisplay 4500) displayCtrl 4522;private _tDropBtn=(findDisplay 4500) displayCtrl 4521;lbClear _tInv;lbClear _pInv;private _data=[[],0];_pDropBtn ctrlEnable!life_is_virtual;_tDropBtn ctrlEnable!life_is_virtual;if(_isVirtual) then{_data=_veh getVariable["ga_vinv",[[],0]];private _inventory=_data select 0;private _weight=_data select 1;ctrlSetText[4504,format["Weight: %1/%2",_weight,(_veh getVariable["ga_vcap",100])]];{_itemName=["getName",_x]call life_fnc_virtItemCfg;_itemShort=["getShortName",_x]call life_fnc_virtItemCfg;_itemPic=["getIcon",_itemShort]call life_fnc_virtItemCfg;_index=_pInv lbAdd(format["%1",_itemName]);_pInv lbSetData[_index,_itemShort];_pInv lbSetPicture[_index,_itemPic];}forEach([1]call life_fnc_virtItemCfg);{_x params["_varName","_value"];if(_value>0) then{_itemName=["getName",_varName]call life_fnc_virtItemCfg;_index=_tInv lbAdd(format["[%1] - %2",_value,_itemName]);