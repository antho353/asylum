};private _extra="";private _cut=0;if((_type isEqualTo"rebcloth")&&!(life_armsCartel select 0)) then{_cut=floor((_price)*0.08);private _updateVal=(life_armsCartel select 1);_updateVal=_updateVal+_cut;life_armsCartel set[1,_updateVal];_extra=format[", with $%1 going to the owner of the Arms Dealer",[_cut]call life_fnc_numberText];};if(_type in _govTaxed) then{private _updateVal=(life_govTax select 1);_cut=floor((_price)*(call life_fnc_getGovTax));_updateVal=_updateVal+_cut;life_govTax set[1,_updateVal];_extra=format[", including a tax of $%1",[_cut]call life_fnc_numberText];};if(!((life_armsCartel select 2) isEqualTo-1)&&!((life_armsCartel select 1) isEqualTo 0)) then{[[2,life_armsCartel select 2,player,life_armsCartel select 1],"TON_fnc_gangBank",false,false]spawn life_fnc_MP;life_armsCartel=[false,0,-1];};if(!(_type isEqualTo"rebcloth")&&!(life_govTax param[0,false])) then{if(!((life_govTax select 2) isEqualTo-1)&&!((life_govTax select 1) isEqualTo 0)) then{["payGovernor",[(life_govTax param[1,0])]]spawn life_fnc_govSystem;life_turfTax set[1,0];};};[format["You have purchased your clothing for $%1%2",[_price]call life_fnc_numberText]+_extra+".","basic"]spawn life_fnc_handleMessage;[["-CLOTHESBOUGHT-",player,(profileName),format["purchased clothes for $%1, Uniform: %2, Headgear: %3, Goggles: %4, Vest: %5, Backpack: %6, POS: %7",[_price]call life_fnc_numberText,(uniform player),(headgear player),(goggles player),(vest player),(backpack player),(getPos player)]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;life_clothingShop_skins params["_uniformTexture","_backpackTexture"];if!(_uniformTexture isEqualTo"") then{player setObjectTextureGlobal[0,_uniformTexture];private _idx=[uniform player,"getID",_uniformTexture]call life_fnc_clothingTextures;private _textureRow=[uniform player,"getRowByID",_idx]call life_fnc_clothingTextures;life_uniformBackpack_skins set[0,_idx];if!(_textureRow param[11,""]isEqualTo"") then{player setObjectTextureGlobal[1,_textureRow select 11];};}else{if!(_oldUniform isEqualTo uniform player) then{life_uniformBackpack_skins set[0,-1];};};if!(_backpackTexture isEqualTo"") then{unitBackpack player setObjectTextureGlobal[0,_backpackTexture];private _idx=[backpack player,"getID",_backpackTexture]call life_fnc_clothingTextures;life_uniformBackpack_skins set[1,_idx];}else{if!(_oldBackpack isEqualTo backpack player) then{life_uniformBackpack_skins set[1,-1];};};private _var=switch(playerSide) do{case civilian:{"ga_clothingSkinsCiv"};case west:{"ga_clothingSkinsCop"};case independent:{"ga_clothingSkinsMed"};};profileNamespace setVariable[_var,life_uniformBackpack_skins];[true]call life_fnc_saveGear;life_clothingShop_skins=["",""];life_clothesPurchased=true;while{dialog}do{closeDialog 0};