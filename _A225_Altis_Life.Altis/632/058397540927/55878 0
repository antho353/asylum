if(!(isNull _nearestCrate)&&(SRV_mentalAsylumData param[4,false])&&(ASY_Server isEqualTo 1)) exitWith{["This crate is locked until someone enters the right combination for the keypad!","basic"]spawn life_fnc_handleMessage;true;};private _usedBy=_container getVariable["ga_veh_in_use",objNull];private _inUse=_usedBy isNotEqualTo objNull;if(_inUse&&!(_usedBy isEqualTo player)) exitWith{["This inventory is already being used by someone.","basic"]spawn life_fnc_handleMessage;life_action_in_use=false;true};_container setVariable["ga_veh_in_use",player,true];_container spawn{params["_container"];waitUntil{!isNull(findDisplay 602)};[true]spawn life_fnc_inventory;waitUntil{private _gearInUse=_container getVariable["ga_veh_in_use",objNull];if(isNull _gearInUse) exitWith{true};if(serverRestartLock) exitWith{["The server is saving this vehicle. Please wait until after restart to open the inventory.","basic"]spawn life_fnc_handleMessage;true};if(_container getVariable["ga_trunkLock",false]) exitWith{["The server is saving this vehicle. Please wait until after restart to open the inventory.","basic"]spawn life_fnc_handleMessage;true};if(_gearInUse isNotEqualTo player) exitWith{["Only one person can access the inventory at a time.","basic"]spawn life_fnc_handleMessage;true };isNull(findDisplay 602)||isNull _container };_container setVariable["ga_veh_in_use",nil,true];while{!isNull(findDisplay 602)}do{closeDialog 0;uiSleep 0.1;};};if(_container isKindOf"LandVehicle"||_container isKindOf"Ship"||_container isKindOf"Air") exitWith{if(!(_container in life_vehicles)&&!(playerSide isEqualTo west)&&{(locked _container) isEqualTo 2}&&((call life_adminLevel)<=3)) exitWith{["You cannot access the inventory of locked vehicles. Try using lockpicks or getting the keys.","basic"]spawn life_fnc_handleMessage;life_action_in_use=false;true };};[]spawn{uiSleep 1;(findDisplay 49) closeDisplay 2;};