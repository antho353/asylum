private _color=[1,1,1,0.3];_price=if(life_bloodMoneyShop) then{_price}else{_price*_discount};_price=if(life_bloodMoneyShop||(_shopType in["rebelwep","turf"])) then{_price}else{_price+(_price*(call life_fnc_getGovTax))};_price=if(_ownAndInFortress) then{_price-(_price*0.15)}else{_price};_price=if(SRV_dominationCheapWeapons&&(call life_fnc_isDominationActive)) then{_price-(_price*0.45)}else{_price};_price=if(call life_fnc_isDominationActive) then{_price-(_price*0.10)}else{_price};private _formatText=if!(life_bloodMoneyShop) then{format["$%1",[round _price]call life_fnc_numberText]}else{format["%1 BM",[round _price]call life_fnc_numberText]};private _rowIndex=_mainItemList lnbAddRow[_displayName,_formatText];_mainItemList lnbSetPicture[[_rowIndex,0],_picture];_mainItemList lnbSetValue[[_rowIndex,1],round _price];_mainItemList lnbSetData[[_rowIndex,0],_class];if(call life_fnc_isDominationActive) then{_color set[3,1]}else{if(_shopType in["rebelwep","turf"]) then{if!(life_bloodMoneyShop) then{if(life_cash>=_price) then{_color set[3,1]};}else{if(life_bloodMoney>=_price) then{_color set[3,1]};};};if(((life_cash>=_price)||((life_atmcash>=_price)&&(life_inv_debitcard>=1)))&&!(_shopType in["rebelwep","turf"])) then{_color set[3,1]};};for"_columnIndex"from 0 to 1 do{_mainItemList lnbSetColor[[_rowIndex,_columnIndex],_color]};};}forEach _listItems;{private _itemListGroup=_x;private _itemList=_itemListGroup controlsGroupCtrl 1000;private _headerButtons=(allControls(ctrlParent _itemListGroup)) select{((ctrlClassName _x) isEqualTo"Life_RscListNBoxHeaderButton")&&((ctrlParentControlsGroup _x) isEqualTo _itemListGroup)};{_x ctrlEnable((lbSize _itemList)>=1)}forEach _headerButtons;}forEach[_mainListGroup,_sideListGroup];ctrlSetFocus _mainItemList;[_mainItemList,0,false,false]call life_fnc_listNBoxSort;_mainItemList ctrlSetFade 0.00;_mainItemList ctrlCommit 0.00;