_progressBar progressSetPosition _currentPoint;_progressText ctrlSetText format["%1 (%2%3)",_text,round(_currentPoint*100),"%"];if(_currentPoint>=1) exitWith{true};if((speed player)>=2) exitWith{[2,format["You failed to seize the %1 inventory.",_vehText]]call life_fnc_broadcast;false};if!((vehicle player) isEqualTo player) exitWith{[2,format["You failed to seize the %1 inventory.",_vehText]]call life_fnc_broadcast;false};if(player getVariable["ga_downed",false]||player getVariable["ga_restrained",false]) exitWith{[2,format["You failed to seize the %1 inventory.",_vehText]]call life_fnc_broadcast;false};if((!life_action_in_use)||(!alive player)||((player distance _vehicle)>=5)) exitWith{[2,format["You failed to seize the %1 inventory.",_vehText]]call life_fnc_broadcast;false};false;};life_action_in_use=false;[]spawn life_fnc_handleAnim;5 cutText["","PLAIN"];if(_isSuccess) then{private _dice=random 100;private _vehicleOwners=_vehicle getVariable["ga_vehOwners",[[getPlayerUID player,profileName]]];private _evidenceTruck=((_vehicleOwners param[0,["123","yes"]]) param[0,"123"]) isEqualTo"000000000";if(!_isTent&&!_evidenceTruck) then{if(_dice>75) then{[[_seizedVirt,2],"TON_fnc_evidenceAppend",2]spawn life_fnc_MP;}else{[[_weapons,1],"TON_fnc_evidenceAppend",2]spawn life_fnc_MP;};};clearWeaponCargoGlobal _vehicle;clearMagazineCargoGlobal _vehicle;clearItemCargoGlobal _vehicle;if(_illegalValue>0) then{private _rank="APD Officer ";[[0,format["A %1 was searched by %2%3 and $%4 worth of drugs / contraband were seized into evidence.",(getText(configFile>>"CfgVehicles">>(typeOf _vehicle)>>"displayName")),_rank,(profileName),[_illegalValue]call life_fnc_numberText]],"life_fnc_broadcast",-2,false,false]spawn life_fnc_MP;[["-SEIZE-",player,(profileName),format["seized $%1 worth of drugs / contraband from a %2, POS: %3",[_illegalValue]call life_fnc_numberText,(getText(configFile>>"CfgVehicles">>(typeOf _vehicle)>>"displayName")),(getPos _vehicle)]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;[floor(_illegalValue/10)]spawn life_fnc_earnPrestige;[[player,_illegalValue],"TON_fnc_copSplit",2]spawn life_fnc_MP;_vehicle setVariable["ga_vinv",[_items,_weight],true];if((_illegalValue>=5000)&&!(_vehicle getVariable["ga_side",""]isEqualTo"cop")) then{_vehicle setVariable["ga_canSeize",true,true];};["action","seizevehiclevalue",_illegalValue]call life_fnc_handleQuest;};titleText[format["You have seized the weapons and items from this %1.",_vehText],"PLAIN"];};}else{[format["Nothing illegal in this %1.",_vehText],"basic"]spawn life_fnc_handleMessage;};_vehicle setVariable["ga_seizing",nil,true];