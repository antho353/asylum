private _progress=_ui displayCtrl 38201;private _pgText=_ui displayCtrl 38202;_progress progressSetPosition 0.01;private _cP=0.01;private _success=false;if!(_vehicle getVariable["ga_labMode",false]) then{["The distillery is warming up.","basic"]spawn life_fnc_handleMessage;private _text="Warming up the distillery";_pgText ctrlSetText format["%2 (1%1)...","%",_text];life_is_processing=true;life_action_in_use=true;_vehicle enableRopeAttach false;private _sleep=0.3;for"_i"from 0 to 1 step 0 do{uiSleep _sleep;_cP=_cP+0.01;_progress progressSetPosition _cP;_pgText ctrlSetText format["%3 (%1%2)...",round(_cP*100),"%",_text];if(_cP>=1) exitWith{_success=true;};if(player distance _vehicle>10) exitWith{["You need to stay within 10m to warm up the distillery.","basic"]spawn life_fnc_handleMessage;};if!(life_action_in_use) exitWith{["Action cancelled. Aborted distillery warm up!","basic"]spawn life_fnc_handleMessage;};if!(alive player) exitWith{["You need to be alive to warm up the distillery.","basic"]spawn life_fnc_handleMessage;};if(speed _vehicle>1) exitWith{["Moving this will make it explode!","basic"]spawn life_fnc_handleMessage;};};5 cutText["","PLAIN"];life_is_processing=false;life_action_in_use=false;if!(_success) exitWith{};_vehicle setHit[getText(configfile>>"CfgVehicles">>typeOf _vehicle>>"HitPoints">>"HitEngine">>"name"),1];_vehicle setVariable["ga_labMode",true,true];[_vehicle]spawn{params["_vehicle"];while{_vehicle getVariable["ga_labMode",false]&&alive _vehicle&&!(isNull _vehicle)}do{if(speed _vehicle>1) exitWith{_vehicle setHit[getText(configfile>>"CfgVehicles">>typeOf _vehicle>>"HitPoints">>"HitEngine">>"name"),1];_vehicle setVariable["ga_labMode",false,true];_vehicle enableRopeAttach false;["The distillery shut down while being moved!","basic"]spawn life_fnc_handleMessage;};uiSleep 4;};};[[_vehicle,"crankSmoke"],"TON_fnc_srvObjectMonitor",2,false,false]spawn life_fnc_MP;}else{["You are breaking down the distillery equipment.","basic"]spawn life_fnc_handleMessage;private _text="Breaking down the distillery";_pgText ctrlSetText format["%2 (1%1)...","%",_text];life_is_processing=true;life_action_in_use=true;_vehicle enableRopeAttach true;private _sleep=0.1;for"_i"from 0 to 1 step 0 do{uiSleep _sleep;_cP=_cP+0.01;_progress progressSetPosition _cP;_pgText ctrlSetText format["%3 (%1%2)...",round(_cP*100),"%",_text];if(_cP>=1) exitWith{_success=true;};if(player distance _vehicle>10) exitWith{["You need to stay within 10m to break down the distillery.","basic"]spawn life_fnc_handleMessage;};if!(life_action_in_use) exitWith{["Action cancelled. You didn't break down the distillery!","basic"]spawn life_fnc_handleMessage;};if!(alive player) exitWith{["You need to be alive to break down the distillery.","basic"]spawn life_fnc_handleMessage;};};5 cutText["","PLAIN"];life_is_processing=false;life_action_in_use=false;if!(_success) exitWith{};_vehicle setVariable["ga_labMode",false,true];_vehicle setHit[getText(configfile>>"CfgVehicles">>typeOf _vehicle>>"HitPoints">>"HitEngine">>"name"),0];};