};_items deleteAt(_items findIf{(_x select 0) isEqualTo _itemShortName});_itemList lbDelete _lbIndex;};if(playerSide isEqualTo west&&_illegalItem) exitWith{private _nearVehicles=nearestObjects[player,["Car","Air","Ship"],30];private _copVehicle=_nearVehicles param[_nearVehicles findIf{_x getVariable["ga_side",""]isEqualTo"cop"},objNull];if(isNull _copVehicle) exitWith{["There aren't any nearby police vehicles to seize this into!","basic"]spawn life_fnc_handleMessage};call _deleteItem;if(_items isEqualTo[]) then{deleteVehicle _obj;closeDialog 0;};private _adjustedArray=[_copVehicle getVariable"ga_vinv",_itemShortName,_itemValue]call life_fnc_adjustInventoryArray;_copVehicle setVariable["ga_vinv",_adjustedArray,true];titleText["This item has been seized into the nearest police vehicle. The item(s) can be placed into evidence from any Police HQ.","PLAIN"];};if(_itemShortName isEqualTo"money") exitWith{player playMoveNow"AinvPknlMstpSlayWrflDnon";titleText[format["You have picked up $%1",[_itemValue]call life_fnc_numberText],"PLAIN"];call _deleteItem;if(_items isEqualTo[]) then{deleteVehicle _obj;closeDialog 0;};life_cash=life_cash+_itemValue;life_cashCache=((life_cash/4)+7);if(_itemValue>=80000) then{[["-CASHPICKUP2-",player,(profileName),format["picked up $%1 at POS: %2",[_itemValue]call life_fnc_numberText,(getPos player)]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;}else{[["-CASHPICKUP-",player,(profileName),format["picked up $%1 at POS: %2",[_itemValue]call life_fnc_numberText,(getPos player)]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;};["moneypickedup",_itemValue]call life_fnc_statArrUpdate;};private _diff=[_itemShortName,_itemValue,life_carryWeight,life_maxWeight]call life_fnc_calWeightDiff;if(_diff<=0) exitWith{["Your inventory space is full.","basic"]spawn life_fnc_handleMessage};if!(_diff isEqualTo _itemValue) then{if!([true,_itemShortName,_diff]call life_fnc_handleInv) exitWith{};private _fnc_updateLB={private _items=life_pickMenuItems;if(isNull _obj) exitWith{};lbClear _itemList;{_x params["_itemShortName","_itemAmount"];private _text=if(_itemShortName isEqualTo"money") then{format["$%1 Cash",[_itemAmount]call life_fnc_numberText];}else{format["%1x %2",_itemAmount,["getName",_itemShortName]call life_fnc_virtItemCfg];};private _index=_itemList lbAdd _text;_itemList lbSetPicture[_index,["getIcon",_itemShortName]call life_fnc_virtItemCfg];_itemList lbSetData[_index,format["['%1', %2]",_itemShortName,_itemAmount]];}forEach _items;};private _index=_items findIf{(_x select 0) isEqualTo _itemShortName};_items set[_index,[_itemShortName,_itemValue-_diff]];player playMoveNow"AinvPknlMstpSlayWrflDnon";titleText[format["You have picked up %1 %2",_diff,_itemLongName],"PLAIN"];call _fnc_updateLB;}else{if([true,_itemShortName,_itemValue]call life_fnc_handleInv) then{player playMoveNow"AinvPknlMstpSlayWrflDnon";titleText[format["You have picked up %1 %2",_itemValue,_itemLongName],"PLAIN"];call _deleteItem;};};if(_items isEqualTo[]&&!(_obj getVariable["ga_questloot",false])) then{deleteVehicle _obj;closeDialog 0};[]call life_fnc_calWe1ght;[["-ITEMPICKUP-",player,(profileName),format["picked up %1 out of %2 %3 at POS: %4",[_diff]call life_fnc_numberText,[_itemValue]call life_fnc_numberText,_itemLongName,(getPos player)]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;