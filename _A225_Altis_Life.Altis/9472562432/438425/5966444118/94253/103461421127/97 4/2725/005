#include"..\..\..\..\..\..\..\macro.h"
if(scriptAvailable(5)) exitWith{["You can only attempt to open your stats every couple seconds!","basic"]spawn life_fnc_handleMessage;};params["_target","_caller","_actionID"];if(!alive player) exitWith{};while{dialog}do{closeDialog 0};disableSerialization;["myasylumstats"]call life_fnc_createDialog;private _asy_display=findDisplay 877000;private _menuTitle=_asy_display displayCtrl 877002;private _mainFilterList=_asy_display displayCtrl 877003;private _mainListGroup=_asy_display displayCtrl 877005;private _mainItemList=_mainListGroup controlsGroupCtrl 1000;private _mainItemListBackground=_mainListGroup controlsGroupCtrl 1003;_mainFilterList lbSetCurSel 0;_menuTitle ctrlSetText(format["%1's MyAsylum Stats",profileName]);private _activeLists=["MyAsylum Statistics","Other Statistics"];if!!(call life_fnc_isDominationActive) then{_activeLists pushBack"Live Domination Stats"};if!(SRV_gangFortressData isEqualTo[]) then{_activeLists pushBack"Live Gang Fortress Stats"};{_activeLists pushBack _x}forEach["Monthly Gang Dom Wins","Monthly Gang Dom Money Won","Top 35 - Dom Kills","Top 35 - Dom K/Ds","Top Bloodmoney"];{_x params["_title"];private _index=_mainFilterList lbAdd _title;_mainFilterList lbSetData[_index,_title];}forEach _activeLists;{_x lnbAddColumn 0.70}forEach[_mainItemList];if((lbSize _mainFilterList)<=1) then{_mainFilterList ctrlShow false;private _mainFilterListPosition=ctrlPosition _mainFilterList;private _controls=((allControls _asy_display) select{((ctrlParentControlsGroup _x) isEqualTo _mainListGroup)&&!((ctrlIDC _x) in[1000,1002,1003])});_mainListGroup ctrlSetPosition[_mainFilterListPosition select 0,_mainFilterListPosition select 1];{_x ctrlSetPosition[(ctrlPosition _x) select 0,((ctrlPosition _x) select 1)+(_mainFilterListPosition select 3)+0.0055]}forEach _controls;{_x ctrlSetPosition[(ctrlPosition _x) select 0,(ctrlPosition _x) select 1,(ctrlPosition _x) select 2,((ctrlPosition _x) select 3)+(_mainFilterListPosition select 3)+0.0055]}forEach[_mainItemList,_mainItemListBackground];