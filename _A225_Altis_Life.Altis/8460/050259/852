_progress progressSetPosition _cP;_pgText ctrlSetText format["%3 (%1%2)...",round(_cP*100),"%",_text];if(_cP>=1) exitWith{_success=true;};if(player==(vehicle player)) exitWith{};if(!alive player) exitWith{};if(!life_action_in_use) exitWith{};};5 cutText["","PLAIN"];life_action_in_use=false;if!(_success) exitWith{};life_side_exp=life_side_exp+20;if(typeOf(vehicle player) in["O_MRAP_02_F","I_MRAP_03_F"]) then{private _turret=if(typeOf(vehicle player)=="O_MRAP_02_F") then{[-1]}else{[0]};private _emptySmoke=if(typeOf(vehicle player)=="O_MRAP_02_F") then{(magazinesAllTurrets(vehicle player) select 0) select 2;}else{(magazinesAllTurrets(vehicle player) select 1) select 2;};if(_emptySmoke isEqualTo 0) then{(vehicle player) setVehicleAmmoDef 1;(vehicle player) addMagazineTurret["SmokeLauncherMag",_turret];}else{for"_i"from 0 to 1 do{(vehicle player) addMagazineTurret["SmokeLauncherMag",_turret];};};["Vehicle smokes have been reloaded.","basic"]spawn life_fnc_handleMessage;}else{(vehicle player) setVehicleAmmoDef 1;["Vehicle weapons have been reloaded.","basic"]spawn life_fnc_handleMessage;};