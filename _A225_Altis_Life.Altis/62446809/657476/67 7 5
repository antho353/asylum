#include"..\..\macro.h"
if(scriptAvailable(5)) exitWith{["Please wait a few seconds before trying to send money again!","basic"]spawn life_fnc_handleMessage;};if((lbCurSel 3306) isEqualTo-1) exitWith{["You need to select a gang member to transfer the money to.","basic"]spawn life_fnc_handleMessage;ctrlEnable[3705,true];};if(life_gang_funds isEqualTo-1) exitWith{closeDialog 0;};life_gang_data params[["_gangID",-1,[0]],["_gangName","",[""]],["_rank",5,[0]]];if(_gangID isEqualTo-1) exitWith{closeDialog 0;};if(_rank>2) exitWith{["You must be a rank 2 or above to transfer gang funds!","basic"]spawn life_fnc_handleMessage;ctrlEnable[3307,false];};if((life_cashCache!=((life_cash/4)+7))||(life_atmcashCache!=((life_atmcash/4)+5))) exitWith{[["-HACKEDMONEY-",player,profileName,format["File: %1 - money tampering attempted! Cash: %2 - Expected cash: %3 | Bank: %4 - Expected bank: %5.",_fnc_scriptName,[life_cash]call life_fnc_numberText,[((life_cashCache-7)*4)]call life_fnc_numberText,[life_atmCash]call life_fnc_numberText,[((life_atmCashCache-5)*4)]call life_fnc_numberText]],"TON_fnc_logIt",2]spawn life_fnc_MP;[[profileName,"Attempting to hack money variable."],"life_fnc_notifyAdmins",-2,false]spawn life_fnc_MP;["MemHackCash",false,false]call compile PreProcessFileLineNumbers"\a3\functions_f\Misc\fn_endMission.sqf";};private _val=parseNumber(ctrlText 3305);if!([str _val]call life_fnc_isNumber) exitWith{["Invalid number.","basic"]spawn life_fnc_handleMessage;};if(_val>999999) exitWith{["You can't transfer more than $999,999 at a time.","basic"]spawn life_fnc_handleMessage;ctrlEnable[2705,true];};if(_val<1000) exitWith{["You cannot transfer less than $1000."]spawn life_fnc_handleMessage;ctrlEnable[2705,true];};if(_val>life_gang_funds) exitWith{["There is not enough gang funds in the account!","basic"]spawn life_fnc_handleMessage;ctrlEnable[3302,true];};(parseSimpleArray(lbData[3306,lbCurSel 3306])) params["_playerUID","_playerName"];private _action=[format["Are you sure you want to send $%1 to %2?",[_val]call life_fnc_numberText,_playerName],"Approve Gang Funds Transfer","Send Money","Cancel"]call BIS_fnc_guiMessage;if(_action) then{[[4,_gangID,player,-(_val),0,0,"",_playerUID],"TON_fnc_gangBank",false,false]spawn life_fnc_MP;ctrlEnable[3302,false];ctrlEnable[3303,false];ctrlEnable[3304,false];ctrlEnable[3307,false];