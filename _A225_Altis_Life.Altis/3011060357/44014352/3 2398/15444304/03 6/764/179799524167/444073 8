if((life_cashCache!=((life_cash/4)+7))||(life_atmcashCache!=((life_atmcash/4)+5))) exitWith{[["-HACKEDMONEY-",player,profileName,format["File: %1 - money tampering attempted! Cash: %2 - Expected cash: %3 | Bank: %4 - Expected bank: %5.",_fnc_scriptName,[life_cash]call life_fnc_numberText,[((life_cashCache-7)*4)]call life_fnc_numberText,[life_atmCash]call life_fnc_numberText,[((life_atmCashCache-5)*4)]call life_fnc_numberText]],"TON_fnc_logIt",2]spawn life_fnc_MP;[[profileName,"Attempting to hack money variable."],"life_fnc_notifyAdmins",-2,false]spawn life_fnc_MP;["MemHackCash",false,false]call compile PreProcessFileLineNumbers"\a3\functions_f\Misc\fn_endMission.sqf";};disableSerialization;if(isNull(findDisplay 1800)) exitWith{};params[["_sell",true,[true]]];private _className=lbData[1850,lbCurSel 1850];private _recipe=[_className]call life_fnc_recipeDetail;private _762=["srifle_DMR_01_F","srifle_EBR_F","srifle_DMR_03_khaki_F","srifle_DMR_03_multicam_F","srifle_DMR_03_tan_F","srifle_DMR_03_woodland_F","srifle_DMR_06_olive_F","srifle_DMR_06_camo_F","arifle_SPAR_03_snd_F","arifle_SPAR_03_khk_F","arifle_AK12_F","arifle_AKM_F"];if(_classname in _762 and!(license_civ_rebel)&&!(_sell)) exitWith{["Crafting a 7.62mm rifle requires a rebel license.","basic"]spawn life_fnc_handleMessage};if(_classname in["B_MRAP_01_F","arifle_MX_F","arifle_MX_khk_F"]and!(license_civ_bounty)&&!(_sell)) exitWith{["Crafting this requires a bounty hunter license.","basic"]spawn life_fnc_handleMessage};if((life_gang_data param[0,-3]) isEqualTo(panagia_flag getVariable["ga_turf_data",[]]param[0,-2])) then{{_x params["_item","_amount"];_x set[1,ceil(_amount*0.75)];}forEach _recipe;};private _isQuest491=((491 in life_completedLifetimeQuests)&&(_classname in["B_MRAP_01_F","O_MRAP_02_F"]));private _isQuest492=((492 in life_completedLifetimeQuests)&&((([_classname]call BIS_fnc_itemType) param[1,"Gun"]) in["AssaultRifle","Handgun","Launcher","MachineGun","Shotgun","SubmachineGun","SniperRifle","Rifle"]));if(_isQuest491||_isQuest492) then{{_x params["_item","_amount"];private _toReduce=switch(true) do{case((491 in life_completedLifetimeQuests)&&(_isQuest491)):{0.90};case((492 in life_completedLifetimeQuests)&&(_isQuest492)):{0.90};};_x set[1,ceil(_amount*_toReduce)];}forEach _recipe;};private _missingItem=!(_recipe findIf{(missionNamespace getVariable(_x select 0))<(_x select 1)}isEqualTo-1);if(_missingItem) exitWith{["You do not have the materials required to craft this item.","basic"]spawn life_fnc_handleMessage;};private _cashRequired=(_recipe param[_recipe findIf{(_x select 0) isEqualTo"life_cash"},0]) param[1,0];_cashRequired=if((490 in life_completedLifetimeQuests)&&(_className isKindOf"Air")) then{_cashRequired*0.90}else{_cashRequired};if(life_cash<_cashRequired) exitWith{["You do not have enough cash to produce this item.","basic"]spawn life_fnc_handleMessage};if(isClass(configFile>>"CfgMagazines">>_className)&&{!(player canAdd _className)}) exitWith{["You don't have enough room for this.","basic"]spawn life_fnc_handleMessage};if(isClass(configFile>>"CfgWeapons">>_className)&&("optic"in _classname)&&{!(player canAdd _className)}) exitWith{["You don't have enough room for this.","basic"]spawn life_fnc_handleMessage};private _itemType=switch(true) do{case(_className isKindOf["Rifle",configFile>>"CfgWeapons"]):{[!((primaryWeapon player) isEqualTo""),"primary weapon"]};case(_className isKindOf["Launcher",configFile>>"CfgWeapons"]):{[!((secondaryWeapon player) isEqualTo""),"secondary weapon"]};case(_className isKindOf["Pistol",configFile>>"CfgWeapons"]):{[!((handgunWeapon player) isEqualTo""),"handgun"]};case(_className isKindOf["Vest_Camo_Base",configFile>>"CfgWeapons"]):{[!((vest player) isEqualTo""),"vest"]};case(_className isKindOf["Vest_NoCamo_Base",configFile>>"CfgWeapons"]):{[!((vest player) isEqualTo""),"vest"]};default{[false,""]};};private _dlcInfo=getAssetDLCInfo[_classname,configFile>>"CfgVehicles"];private _action1=true;if(!(_classname isKindOf"Car"||_classname isKindOf"Ship"||_classname isKindOf"Air")&&_dlcInfo select 0&&!(_dlcInfo select 1)) then{_action1=[format["You need the %1 DLC in order to re-equip this weapon if you place it on the ground or into a vehicle/crate. Purchase anyway?",_dlcInfo select 5],"DLC Item Confirmation","Yes","No"]call BIS_fnc_guiMessage;};if!(_action1) exitWith{closeDialog 0};private _action2=true;private _action2=if(_itemType select 0&&!(_sell)) then{[format["You already have a %1 equipped, crafting another will replace it. Craft anyway?",_itemType select 1],"Duplicate Item Warning","Yes","No"]call BIS_fnc_guiMessage;}else{true};if!(_action2) exitWith{closeDialog 0};if(isClass(configFile>>"CfgVehicles">>_className)&&!(_sell)&&{life_garageCount>=call life_maxGarageVeh}) exitWith{closeDialog 0;[format["You cannot craft more vehicles of this type into your garage until you sell (or crash) existing vehicles! The current maximum is %1 vehicles per garage.",call life_maxGarageVeh],"basic"]spawn life_fnc_handleMessage;};private _blockedSpawn=false;if(isClass(configFile>>"CfgVehicles">>_className)) then{private _markers=["veh_sp_84","veh_sp_85","veh_sp_86","veh_sp_91","veh_sp_92","veh_sp_93","veh_sp_94","veh_sp_96"];private _spawnPoint=_markers param[_markers findIf{nearestObjects[getMarkerPos _x,["Car","Ship"],5]isEqualTo[]&&nearestObjects[getMarkerPos _x,["Air"],14]isEqualTo[]&&((player distance2D(getMarkerPos _x)<=100))},""];