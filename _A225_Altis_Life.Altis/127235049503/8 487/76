params[["_caseType","",[""]],"_fireData"];switch(_caseType) do{case("clientFireEffects"):{_fireData params[["_houseOnFireObj",objNull,[objNull]],["_houseType","",[""]]];if(playerSide isEqualTo independent) then{if!(life_isActiveFirefighter) then{["<t align='center' size='1.5' color='#ff1717'>AFD Dispatch</t><br/><br/>A building has caught fire and needs firefighters! Quickly go to the firestation to gear up!"]spawn life_fnc_handleMessage;}};private _blowPressure=0.5;private _houseOnFireObj=_houseOnFireObj;private _fireFlow=(getPosATL _houseOnFireObj vectorFromTo(_houseOnFireObj getRelPos[10,0])) vectorMultiply _blowPressure;private _fireFlowVectorSpeed=0.5;private _fireDiameter=15;private _flameSize=6;private _fireParticles=[];private _fireTrigger=createTrigger["EmptyDetector",getPosATL _houseOnFireObj,false];_fireTrigger setTriggerArea[13,13,0,false];_fireTrigger setTriggerActivation["ANYPLAYER","PRESENT",true];_fireTrigger setTriggerStatements["((this && ((vehicle player) in thisList)) || (player in thisList))","['fireTrigger', [thisList, thisTrigger]] spawn life_fnc_medicFireClient",""];_fireTrigger setTriggerInterval 5;[_houseOnFireObj]spawn{params["_houseOnFireObj"];while{(_houseOnFireObj getVariable["ga_houseOnFire",false])}do{_houseOnFireObj say3D["medicFireFlames1",100];uiSleep 12;};};[_houseOnFireObj]spawn{params["_houseOnFireObj"];while{(_houseOnFireObj getVariable["ga_houseOnFire",false])}do{_houseOnFireObj say3D["medicFireFlames2",100];uiSleep 5;};};private _houseType=typeOf _houseOnFireObj;([_houseType]call life_fnc_medicFireRelPositionsCfg) params["_largeHouseFires","_smallHouseFires"];private _totalLargeHouseFires=count _largeHouseFires;private _totalSmallHouseFires=count _smallHouseFires;private _fireParticles=[];private _spawnedObjects=[];{_x params["_relativePosition","_dir"];private _position=ASLToATL(AGLToASL(_houseOnFireObj modelToWorld _relativePosition));private _houseDir=getDir _houseOnFireObj;private _xSpawnedObject="Land_Volleyball_01_F"createVehicleLocal[0,0,0];_xSpawnedObject enableSimulation false;_xSpawnedObject allowDamage false;_xSpawnedObject setDir(_houseDir+_dir);_xSpawnedObject setPosATL _position;_xSpawnedObject hideObject true;_spawnedObjects pushBack _xSpawnedObject;private _fireDiameter=3;private _flameSize=5;private _fireIndex=_forEachIndex;{_x params["_particleCircle","_particleRandom","_particleParams","_dropInterval"];_xFireParticle="#particlesource"createVehicleLocal(getPosATL _xSpawnedObject);_xFireParticle setParticleCircle _particleCircle;_xFireParticle setParticleRandom _particleRandom;_xFireParticle setParticleParams _particleParams;_xFireParticle setDropInterval _dropInterval;_fireParticles pushBack _xFireParticle;}forEach[[[0,[0,0,0]],[1,[_fireDiameter/2,_fireDiameter/2,0],[0,0,0],0.1,0.1,[0,0,0,0.1],1,0],[["\A3\data_f\ParticleEffects\Universal\Universal",16,10,32,1],"","Billboard",1,30,[0,0,0],[0,0,0],0,10.07,7.9,0,[_flameSize,_flameSize,_flameSize],[[1,1,1,0],[1,1,1,1],[1,1,1,0]],[0.8],0,0,"","",_xSpawnedObject,0,true],0.5],[[0,[0,0,0]],[0,[_fireDiameter/3,_fireDiameter/3,0],[0.175,0.175,0],0,0.25,[0,0,0,0.1],0,0],[["\A3\data_f\ParticleEffects\Universal\Refract.p3d",1,0,1],"","Billboard",1,10,[0,0,0],[0,0,0.75],30,10.2,7.9,0.1,[_flameSize*2,_flameSize*2,_flameSize*2],[[1,1,1,0],[1,1,1,0.5],[1,1,1,0]],[0.08],1,0,"","",_xSpawnedObject],0.5]];}forEach _largeHouseFires;{_x params["_relativePosition","_dir"];private _position=ASLToATL(AGLToASL(_houseOnFireObj modelToWorld _relativePosition));private _houseDir=getDir _houseOnFireObj;private _xSpawnedObject="Land_Volleyball_01_F"createVehicleLocal[0,0,0];_xSpawnedObject enableSimulation false;_xSpawnedObject allowDamage false;_xSpawnedObject setDir(_houseDir+_dir);_xSpawnedObject setPosATL _position;_xSpawnedObject hideObject true;_spawnedObjects pushBack _xSpawnedObject;private _fireDirection=getDir _xSpawnedObject;private _fireBlowSpeed=1.5;private _fireZSpeed=1.5;private _fireFlowVector=(getPosATL _xSpawnedObject vectorFromTo(_xSpawnedObject getRelPos[10,0])) vectorMultiply _fireBlowSpeed;{_x params["_particleCircle","_particleRandom","_particleParams","_dropInterval"];_xFireParticle="#particlesource"createVehicleLocal(getPosATL _xSpawnedObject);_xFireParticle setParticleCircle _particleCircle;_xFireParticle setParticleRandom _particleRandom;_xFireParticle setParticleParams _particleParams;_xFireParticle setDropInterval _dropInterval;_fireParticles pushBack _xFireParticle;}forEach[[[0,[0,0,0]],[0.1,[0,0,0],[0,0,0],8,0.1,[0,0,0,0.1],1,0],[["\A3\data_f\ParticleEffects\Universal\Refract.p3d",1,0,1],"","Billboard",1,1,[0,0,0],[0,0,0.5],15,10.05,7.9,0.1,[1,1,1],[[1,1,1,0],[1,1,1,1],[1,1,1,0]],[0.08],1,0,"","",_xSpawnedObject],0.1],[[0,[0,0,0]],[0.5,[0.3,0.3,0],[0,0,0],2,0.5,[0,0,0,0.1],0,0],[["\A3\data_f\ParticleEffects\Universal\Universal.p3d",16,1,16,0],"","Billboard",1,2,[0,0,0],[_fireBlowSpeed*(_fireFlowVector select 0),_fireBlowSpeed*(_fireFlowVector select 1),_fireZSpeed],15,7.5,7.9,0.5,[1,1,1],[[1,1,1,1],[1,1,1,1],[1,1,1,1]],[2],0,0,"","",_xSpawnedObject],0.05],[[0,[0,0,0]],[0.5,[0.5,0.5,0.5],[0,0,0],10,0.1,[0,0,0,0.1],1,0.5],[["\A3\data_f\ParticleEffects\Universal\Universal_02.p3d",16,15,16,1],"","Billboard",1,1.5,[0,0,0],[_fireBlowSpeed*(_fireFlowVector select 0),_fireBlowSpeed*(_fireFlowVector select 1),_fireZSpeed],15,9,8,0.1,[0.1,0.1,0.05],[[1,1,1,1],[1,1,1,1],[1,1,1,1]],[1],1,0.5,"","",_xSpawnedObject],0.1],[[0,[0,0,0]],[1,[0.5,0.5,0.5],[0,0,0],10,0.5,[0,0,0,0.1],1,0],[["\A3\data_f\ParticleEffects\Universal\Universal_02.p3d",8,0,40,1],"","Billboard",1,5,[0,0,0],[_fireBlowSpeed*(_fireFlowVector select 0),_fireBlowSpeed*(_fireFlowVector select 1),_fireZSpeed],15,9.5,7.9,0.1,[1.5,3,5],[[0.5,0.2,0.2,0.5],[0,0,0,0.5],[1,1,1,0]],[0.5],1,0,"","",_xSpawnedObject],0.1]];}forEach _smallHouseFires;private _smokeFireObj="Land_Volleyball_01_F"createVehicleLocal[0,0,0];private _smokeFirePos=getPosATL _houseOnFireObj;_smokeFirePos set[2,10];_smokeFireObj enableSimulation false;_smokeFireObj allowDamage false;_smokeFireObj setPosATL _smokeFirePos;_smokeFireObj hideObject true;private _smokeFire="#particlesource"createVehicleLocal _smokeFirePos;_smokeFire setParticleCircle[0,[0,0,0]];_smokeFire setParticleRandom[7,[12/4,12/4,0],[-2,-2,0],5,0.5,[0,0,0,0.1],1,0];_smokeFire setParticleParams[["\A3\data_f\ParticleEffects\Universal\Universal_02.p3d",8,0,40,1],"","Billboard",1,30,[0,0,-5],[1,1,4],13,10,7.9,0.1,[10,15,30,40,60],[[0,0,0,0.1],[0,0,0,0.5],[0.2,0.2,0.2,0.2],[0.5,0.5,0.5,0.1],[0.5,0.5,0.5,0]],[0.5],1,0,"","",_smokeFireObj];_smokeFire setDropInterval 0.1;_spawnedObjects pushBack _smokeFireObj;_fireParticles pushBack _smokeFire;waitUntil{uiSleep 1;!(_houseOnFireObj getVariable["ga_houseOnFire",false])};{deleteVehicle _x}forEach _fireParticles;{deleteVehicle _x}forEach _spawnedObjects;deleteVehicle _fireTrigger;};case("fireTrigger"):{_fireData params["_thisList","_thisTrigger"];if(!canSuspend) exitWith{_this spawn life_fnc_medicFireClient;};if!(player in _thisList||(vehicle player) in _thisList) exitWith{};private _asy_obj=player;private _zoneRadius=(triggerArea _thisTrigger) select 0;private _isProtected=(((uniform player) isEqualTo"U_C_ConstructionCoverall_Red_F")&&((goggles player) isEqualTo"G_RegulatorMask_F")&&life_isActiveFirefighter);if!(_isProtected) then{titleText["<img size='1' image='icons\warningico.paa' /><t color='#ff0000' size='2'>CAUTION!</t><img size='1' image='icons\warningico.paa' /><br/> <t size='1'>You have entered a fire zone!<br/> You will get severe burning on your skin from not wearing protective gear!</t>","PLAIN",-1,true,true];uiSleep 3;[999999]call BIS_fnc_bloodEffect;player setVariable["ga_isOnFire",true,true];[["playerCaughtOnFireEffects",[player]],"life_fnc_medicFireClient",((allPlayers-[allDeadMen]) select{(_x distance player)<=100})]spawn life_fnc_MP;while{((player distance _thisTrigger)<_zoneRadius)}do{private _centerDistance=player distance _thisTrigger;uiSleep 0.5;if(_centerDistance<_zoneRadius) then{_asy_obj setDamage((damage _asy_obj)+0.04);};};}else{titleText["<img size='1' image='icons\warningico.paa' /><t color='#ff0000' size='2'>CAUTION!</t><img size='1' image='icons\warningico.paa' /><br/> <t size='1'>You have entered a fire zone!</t>","PLAIN",-1,true,true];};waitUntil{uiSleep 1;((player distance2D _thisTrigger)>_zoneRadius)};if(player getVariable["ga_isOnFire",false]) then{player setVariable["ga_isOnFire",false,true];};};case("playerCaughtOnFireEffects"):{_fireData params[["_playerObj",objNull,[objNull]]];private _fireParticle1="#particlesource"createVehicleLocal(getPosATL _playerObj);_fireParticle1 setParticleCircle[0,[0,0,0]];_fireParticle1 setParticleRandom[0.1,[0,0,0],[0,0,0],7,0.1,[0,0,0,0.1],1,0];_fireParticle1 setParticleParams[["\A3\data_f\ParticleEffects\Universal\Universal_02.p3d",16,15,16,1],"","Billboard",1,0.5,[0,0,0],[0,0,0],15,7,7.9,1,[0.5,0.5,0.1],[[1,1,1,1],[1,1,1,1],[1,1,1,0]],[1],1,0,"","",_playerObj];_fireParticle1 setDropInterval 0.1;_fireParticle2="#particlesource"createVehicleLocal(getPosATL _playerObj);_fireParticle2 setParticleRandom[1,[0.2,0.2,0],[0,0,0],10,0.5,[0,0,0,0.1],1,0];_fireParticle2 setParticleParams[["\A3\data_f\ParticleEffects\Universal\Universal_02.p3d",8,0,40,1],"","Billboard",1,3,[0,0,0],[0,0,0],15,8,7.9,0.1,[1,3,5],[[0.5,0.2,0.2,0],[0,0,0,0.5],[1,1,1,0]],[1],1,0,"","",_playerObj];_fireParticle2 setDropInterval 0.1;waitUntil{!(alive _playerObj)||!(_playerObj getVariable["ga_isOnFire",false])};{deleteVehicle _x}forEach[_fireParticle1,_fireParticle2];};case("toggleFirehose"):{_fireData params[["_hoseStatus",false,[false]],["_cursorObject",objNull,[objNull]]];if!(_hoseStatus) then{if(life_firehoseGallons isEqualTo 0) exitWith{["You have no water in your hose, refill at your nearest AFD tempest fuel!"]spawn life_fnc_handleMessage;};if(life_firehoseProgress>=100) exitWith{["You have already completed your duty in putting out the flames. Wait for other personel to finish their jobs!"]spawn life_fnc_handleMessage;player setVariable["ga_hoseComplete",true,2];};player setVariable["ga_hoseOn",true,true];["You have turned on your fire hose!"]spawn life_fnc_handleMessage;[["hoseEffects",[player]],"life_fnc_medicFireClient",((allPlayers-[allDeadMen]) select{(_x distance player)<=200})]spawn life_fnc_MP;disableSerialization;5 cutRsc["life_progress","PLAIN"];private _ui=uiNamespace getVariable"life_progress";private _progress=_ui displayCtrl 38201;private _pgText=_ui displayCtrl 38202;private _text=format["%1%2...","Putting Out Fire"];_pgText ctrlSetText format["%2(%1)...","%",_text];_progress progressSetPosition 0.01;_success=false;private _startPos=getPos player;