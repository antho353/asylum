params[["_side","",[""]]];disableSerialization;if(_side isEqualTo"") exitWith{closeDialog 0};if(_side isEqualTo"gang"&&life_gang_data isEqualTo[]) exitWith{["You are not currently a member of a gang. You must create one or receive an invitation.","basic"]spawn life_fnc_handleMessage;closeDialog 0;};createDialog"life_talent_menu";waitUntil{!isNull(findDisplay 123000)};private _asy_display=findDisplay 123000;private _talentListDisplayCtrl=_asy_display displayCtrl 123001;private _talentInfoText=_asy_display displayCtrl 123002;private _talentPointsText=_asy_display displayCtrl 123006;private _talentButton=_asy_display displayCtrl 123004;private _talentTreeTitle=_asy_display displayCtrl 123005;[_asy_display]spawn life_fnc_p_updateMenu;_talentButton ctrlEnable false;_talentButton ctrlSetText"SELECT TALENT";private["_max","_availTalents","_talents","_free"];if(_side=="standard") then{_max=life_maxTalents;_availTalents=life_currentTalents;_talents=life_side_talents;_free=_availTalents-count _talents;}else{_max=9;_availTalents=life_currentGangTalents;_talents=life_gang_talents;_free=_availTalents-count _talents;};private _titleName=switch(true) do{case(_side isEqualTo"gang"):{"Gang"};case(playerSide isEqualTo west):{"APD"};case(playerSide isEqualTo civilian&&(_side isNotEqualTo"gang")):{"Civilian"};case(playerSide isEqualTo independent):{"AFD"};default{"Your"};};_talentTreeTitle ctrlSetStructuredText parseText format["<t size='0.90' align='center'>%1 Talent Tree</t>",_titleName];_talentPointsText ctrlSetStructuredText parseText format["<t size='0.70' align='center'>Points: %1/%2 | Available: %3</t>",count _talents,_max,_free];