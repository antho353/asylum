#include"..\..\..\..\..\..\macro.h"
if(scriptAvailable(2)) exitWith{["Wait a couple of seconds before attempting to use the swap function again."]spawn life_fnc_handleMessage};disableSerialization;private _trunkSel=lbData[4502,lbCurSel 4502];private _playerSel=lbData[4503,lbCursel 4503];private _trunkNum=parseNumber(ctrlText 4505);private _playerNum=parseNumber(ctrlText 4506);if(lbCurSel 4502 isEqualTo-1||lbCurSel 4503 isEqualTo-1||_trunkSel isEqualTo""||_playerSel isEqualTo"") exitWIth{["You need to select an item from both inventories.","basic"]spawn life_fnc_handleMessage;};if(_trunkNum<=0||_playerNum<=0) exitWith{["You need to select a number above 0 for both inventories.","basic"]spawn life_fnc_handleMessage;};if(_trunkSel isEqualTo _playerSel) exitWith{["It seems you've selected the same item... What would that accomplish?","basic"]spawn life_fnc_handleMessage;};if(_playerSel in["goldbar","bank_money"]&&life_trunk_vehicle isKindOf"House_F") exitWith{["You can't fit this into your house.","basic"]spawn life_Fnc_handleMessage;};if(_playerSel isEqualTo"goldbar"&&life_trunk_vehicle isKindOf"Air") exitWith{["This is too heavy for safe air transport.","basic"]spawn life_fnc_handleMessage;};if(typeOf life_trunk_vehicle in["B_Truck_01_fuel_F","C_Truck_02_fuel_F","C_Van_01_fuel_F"]&&!(_playerSel in["oilu","oilp","pickaxe"])) exitWith{["This vehicle can only hold oil and oil accessories","basic"]spawn life_fnc_handleMessage;};if(_playerSel in["crankp","crank"]&&life_trunk_vehicle isKindOf"House_F") exitWith{["This item is too dangerous to store in your home!","basic"]spawn life_Fnc_handleMessage;};if((_playerSel in["uraniumu","uraniump"])&&!((typeOf life_trunk_vehicle) in["B_Truck_01_box_F","C_Van_01_box_F"])) exitWith{["This needs a HEMTT Box or Box Truck to safely transport!","basic"]spawn life_fnc_handleMessage;};if((_playerSel in["jewelHope","jewelRolex","jewelAP","jewelDiamonds","jewelGoldBag","jewelExoJewels","jewelRing","jewelBling","jewelBag"])&&life_trunk_vehicle isKindOf"Air") exitWith{["This is too heavy for safe air transport!","basic"]spawn life_fnc_handleMessage;};if((_playerSel in["jewelHope","jewelRolex","jewelAP","jewelDiamonds","jewelGoldBag","jewelExoJewels","jewelRing","jewelBling","jewelBag"])&&life_trunk_vehicle isKindOf"House_F") exitWith{["The African Warlord's henchmen will not allow you to store this!!"]spawn life_fnc_handleMessage;};private _vehicleWeights=[life_trunk_vehicle,true]call life_fnc_vehicleWeight;_vehicleWeights params["_max","_used"];private _itemSelWeight=_playerNum*(["getItemWeight",_playerSel]call life_fnc_virtItemCfg);private _trunkSelWeight=_trunkNum*(["getItemWeight",_trunkSel]call life_fnc_virtItemCfg);private _trunkWeightCheck=(_used+_itemSelWeight-_trunkSelWeight)>_max;private _playerWeightCheck=(life_carryWeight-_itemSelWeight+_trunkSelWeight)>life_maxWeight;