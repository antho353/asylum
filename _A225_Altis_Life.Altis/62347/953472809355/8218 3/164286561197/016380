params[["_vehicle",objNull,[objNull]]];if(isNull _vehicle) exitWith{};if(playerSide isNotEqualTo civilian) exitWith{};private _zone="";private _resourceZones=["apple_1","apple_2","apple_4","apple_5","peaches_2","peaches_3","peaches_4","weed_1","illegal_marker_1_0","illegal_marker_2_0","illegal_marker_3_0"];private _maxWeight=_vehicle getVariable["ga_vcap",["getVirtCap","",typeOf _vehicle]call life_fnc_vehicleConfig];if!(objNull isEqualTo(_vehicle getVariable["ga_mining",objNull])) exitWith{["This vehicle is already mining","basic"]spawn life_fnc_handleMessage;};_vehicle setVariable["ga_mining",player,true];private _totalGathered=0;private _itemGathered="";private _dbInfo=_vehicle getVariable["ga_dbInfo",[]];while{driver _vehicle isEqualTo player}do{if(!alive _vehicle||isNull _vehicle||!alive player) exitWith{};private _zone=_resourceZones param[_resourceZones findIf{(player distance(getMarkerPos _x)<290)},""];private _gatherArray=switch(true) do{case(_zone isEqualTo"illegal_marker_1_0"):{["heroinu",290];};case(_zone isEqualTo"illegal_marker_2_0"):{["cocaine",290];};case(_zone isEqualTo"illegal_marker_3_0"):{["ephedrau",290];};case(_zone isEqualTo"weed_1"):{["cannabis",290];};case(_zone find"apple"!=-1):{["apple",50];};case(_zone find"peaches"!=-1):{["peach",50];};default{["",0]};};_gatherArray params["_item","_distance"];_itemGathered=_item;if!(_gatherArray isEqualTo["",0]) then{if((player distance(getMarkerPos _zone)<_distance)&&(speed player>5)&&(((getPosATL player) select 2)<2)&&!(dialog)) then{private _vehInv=_vehicle getVariable["ga_vinv",[[],0]];