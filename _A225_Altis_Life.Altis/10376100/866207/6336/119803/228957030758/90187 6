if!(isNull objectParent player) exitWith{};if(player getVariable["ga_downed",false]||player getVariable["ga_restrained",false]) exitWith{};if(life_autoRun) exitWith{life_autoRun=false;["Auto Run disabled.","basic"]spawn life_fnc_handleMessage;player playMoveNow"AmovPercMstpSnonWnonDnon";if!(isNil"autoRunStop") then{(findDisplay 46) displayRemoveEventHandler["KeyDown",autoRunStop];};autoRunStop=nil;};autoRunStop=(findDisplay 46) displayAddEventHandler["KeyDown",{params["_ctrl","_code","_shift","_ctrlKey","_alt"];if(_code in[17,30,31,32]) then{life_autoRun=false;["Auto Run disabled.","basic"]spawn life_fnc_handleMessage;player playMoveNow"AmovPercMstpSnonWnonDnon";if!(isNil"autoRunStop") then{(findDisplay 46) displayRemoveEventHandler["KeyDown",autoRunStop];};autoRunStop=nil;};}];private _getAnimDuration={private _animSpeed=getNumber(configfile>>"CfgMovesMaleSdr">>"States">>_this>>"speed");private _duration=if!(_animSpeed isEqualTo 0) then{abs(1/_animSpeed)}else{0};_duration*0.9;};life_autoRun=true;["Auto Run enabled.","basic"]spawn life_fnc_handleMessage;while{life_autoRun}do{if!(isNull objectParent player) exitWith{life_autoRun=false;};if(player getVariable["ga_downed",false]||player getVariable["ga_restrained",false]) exitWith{life_autoRun=false;};if(life_isDead) exitWith{life_autoRun=false;};private _terrainSlope=[getPos player,getDir player]call BIS_fnc_terrainGradAngle;private _staminaTime=getStamina player;private _damage=damage player;private _damageLegs=player getHit"legs";private _uniform=uniform player;private _animation="";private _diveSuits=["U_O_Wetsuit","U_I_Wetsuit","U_B_Wetsuit","U_B_survival_uniform"];private _curWep=currentWeapon player;private _primary=primaryWeapon player;private _secondary=secondaryWeapon player;private _handgun=handgunWeapon player;switch(true) do{case(_staminaTime>1.5&&surfaceIsWater position player&&(((getPosASL player) select 2)<-1.15)&&_damage<0.5&&_damageLegs<0.5):{_animation=switch(true) do{case(_curWep isEqualTo""&&_uniform in _diveSuits):{"AbdvPercMsprSnonWnonDf"};case(_curWep isEqualTo _primary&&_uniform in _diveSuits):{"AbdvPercMsprSnonWrflDf"};case(_curWep isEqualTo""):{"AbswPercMsprSnonWnonDf"};