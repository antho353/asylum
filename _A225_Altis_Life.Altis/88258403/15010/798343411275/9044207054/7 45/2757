if(((ceil(random _chance)) isEqualTo 1)&&((_robberyItems findIf{_x>=1})>=0)) then{if(([]call life_fnc_activeFederalEvent)||(SRV_lastRobbery>(serverTime-(60*15)))) then{if([]call life_fnc_activeFederalEvent) then{["There is already another Federal Event happening.","basic"]spawn life_fnc_handleMessage;};if(SRV_lastRobbery>(serverTime-(60*15))) then{[2,format["Security is high due to a recent robbery and you cannot start the robbery. Try again in %1 minute(s).",ceil((SRV_lastRobbery-(serverTime-(60*15)))/60)]]call life_fnc_broadcast;};}else{[2,"You have been spotted by the Federal Reserve Security and set off a security alarm! You, and any who are with you, are now wanted for federal reserve robbery."]call life_fnc_broadcast;[[player],"TON_fnc_fedRobbery",2]spawn life_fnc_MP;};};}}},[],20]call life_fnc_addPerFrameHandler;[{if(((A_stats_crimes param[0,0])>10000)&&!(call life_fnc_isDominationActive)) then{private _toSend=(allPlayers-[allDeadMen]-[player]) select{side _x isEqualTo west||(side _x isEqualTo civilian&&_x getVariable["ga_isBountyHunter",false])};if((round(random 1)) isEqualTo 0) then{private _nearTown=(player distance(getMarkerPos"city")<250)||(player distance(getMarkerPos"donor_town")<250)||(player distance(getMarkerPos"civ_spawn_2")<250)||(player distance(getMarkerPos"civ_spawn_3")<250)||(player distance(getMarkerPos"civ_spawn_4")<250);if(_nearTown) then{[[7,profileName,"0",player],"life_fnc_clientMessage",_toSend]spawn life_fnc_MP;}else{private _marker=[allMapMarkers,player]call BIS_fnc_nearestPosition;if((getMarkerColor _marker) in["ColorRed","ColorEast"]) then{if!("_USER_DEFINED"in _marker) then{if((player distance2D(getMarkerPos _marker)<300)) then{[[7,profileName,"1",player],"life_fnc_clientMessage",_toSend]spawn life_fnc_MP;};};};};};};},[],300]call life_fnc_addPerFrameHandler;[{if(!license_civ_bounty||!(8 in life_side_talents)) then{if(alive player&&!(life_isDead)) then{private _currentWeapon=primaryWeapon player;if(_currentWeapon in["arifle_MX_F","arifle_MXC_F","arifle_MX_khk_F"]) then{private _gwh=createVehicle["GroundWeaponHolder",getPosATL player,[],0,"CAN_COLLIDE"];private _gItems=primaryWeaponItems player;player removeWeapon(primaryWeapon player);_gwh addWeaponCargoGlobal[_prev,1];{_gwh addItemCargoGlobal[_x,1]}forEach _gItems;["You cannot carry an MX without a BH License and the Master Bounty Hunter Talent!","basic"]spawn life_fnc_handleMessage;};};};},[],10]call life_fnc_addPerFrameHandler;if((license_civ_bounty)&&!(call life_fnc_isDominationActive)) then{[[getPlayerUID player],"TON_fnc_srvPersistentBounties",2]spawn life_fnc_MP;player setVariable["ga_isBountyHunter",true,true];};life_maxTalents=20;[]call life_fnc_verifyTalents;[]spawn life_fnc_trackMarkers;if(SRV_ufoCrash select 0) then{uiSleep 5;[(SRV_ufoCrash select 3)]spawn life_fnc_ufoCrash;};[]spawn life_fnc_serverInfoMessages;if((A_stats_civTime<=180)||((profileNamespace getVariable["ga_tutorialProgress",-1])<14)&&(A_stats_civTime<=180)) then{[]spawn{uiSleep 5;[]spawn life_fnc_tutorialNewPlayer;};}else{profileNamespace setVariable["ga_tutorialProgress",14];};[]spawn{uiSleep 7.5;if!((profileNamespace getVariable["ga_questChestLootArray",[]]) isEqualTo[]) then{if(isNil"life_questChestTask") then{["spawnLootChest","spawnLootChest",1]spawn life_fnc_handleQuest;};};};[]spawn{uiSleep 30;life_loginBonusData params["_playerUID","_consecutiveDays","_needsGift","_wipeProgress"];if((_needsGift)&&!(call life_fnc_isDominationActive)) then{["You have a login bonus available for you! Type !loginbonus to retrieve it.","login_bonus"]spawn life_fnc_handleMessage;};};[]spawn{uiSleep 8;private _nearbyBoomBoxes=player nearObjects["Land_BatteryPack_01_closed_black_F",350];if(_nearbyBoomBoxes isNotEqualTo[]) then{{["initMusic",[_x]]spawn life_fnc_boomBox;}forEach _nearbyBoomBoxes;};};if(ASY_Server isEqualTo 2) then{[]spawn{uiSleep 5;};};