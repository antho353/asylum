_exit=true;};life_cash=(round(life_cash-_price)) max 0;life_cashCache=((life_cash/4)+7);};if(_exit) exitWith{[false,_item,_amount]call life_fnc_handleInv;[_shopType,true]spawn life_fnc_virt_update;};private _nearMedSupply=nearestObjects[player,["C_IDAP_supplyCrate_F"],6];if(count _nearMedSupply>=1) then{if((_nearMedSupply select 0) getVariable["ga_medSupply",false]) then{private _shopOwner=(_nearMedSupply select 0) getVariable["ga_Owner",objNull];if(!(isNull _shopOwner)&&!(_shopOwner isEqualTo player)) then{[[player,_shopOwner,_price],"TON_fnc_medSupplyPay",2]spawn life_fnc_MP;};};};if((call life_fnc_isDominationActive)&&([player]call life_fnc_inDomSafezone)&&((call life_adminLevel)<3)) then{{life_dominationPotCache=life_dominationPotCache+_price;[format["This purchase has added $%1 to the domination event prize pool!",[_price]call life_fnc_numberText]]spawn life_fnc_handleMessage;};private _rebelOutposts=["Rebelop_1","Rebelop_2","Rebelop_3","Rebelop_4","Rebelop_5","Rebelop_6"];if!(({player distance(getMarkerPos _x)<=200}count _rebelOutposts) isEqualTo 0) then{["moneyspentrebel",_price]call life_fnc_statArrUpdate;};[format["You bought %1 %2 for $%3%4.",_amount,_itemName,[_price]call life_fnc_numberText,_extra],"basic"]spawn life_fnc_handleMessage;PlaySound"purchase";[_shopType,true]spawn life_fnc_virt_update;[["-ITEMBOUGHT-",player,(profileName),format["purchased %1 %2 for $%3 at POS: %4",[_amount]call life_fnc_numberText,["getName",_item]call life_fnc_virtItemCfg,[_price]call life_fnc_numberText,(getPos player)]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;}else{[format["You do not have room in your inventory for %1 %2",_amount,_itemName],"basic"]spawn life_fnc_handleMessage;};