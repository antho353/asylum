(_this select 3) params[["_shop","",[""]],["_sideCheck",sideUnknown,[civilian]],["_spawnPoints","",["",[],objNull]],["_shopFlag","",[""]],["_shopTitle","",[""]],["_disableBuy",false,[true]]];if(dialog||_shop isEqualTo""||_sideCheck isEqualTo sideUnknown||player getVariable["ga_restrained",false]||player getVariable["ga_surrendered",false]) exitWith{};if!(_sideCheck isEqualTo playerSide) exitWith{["This shop is not allowed for your faction!","basic"]spawn life_fnc_handleMessage;};private _shop=if((call life_fnc_isDominationActive)&&(playerSide isEqualTo west)) then{"srt_car"}else{_shop};disableSerialization;if(_shop isEqualTo"blood_car") then{life_bloodMoneyShop=true;};["ASY_vehicleShop"]call life_fnc_createDialog;if!(_shop in["swat_car","firefighter_car","srt_car"]) then{life_garageCount=-1;[[getPlayerUID player,playerSide,player],"TON_fnc_garageCount",2]spawn life_fnc_MP;}else{life_garageCount=0;};life_veh_shop=[_shop,_spawnPoints,_shopFlag,_disableBuy];if(life_bloodMoneyShop) then{ctrlSetText[100101,_shopTitle+(format[" - %1 BM",life_bloodMoney])];}else{ctrlSetText[100101,_shopTitle];};if(_disableBuy) then{ctrlEnable[100107,false];};private _vehicleList=["shopVehicles",_shop]call life_fnc_vehicleConfig;private _diagControl=((findDisplay 100100) displayCtrl 100102);