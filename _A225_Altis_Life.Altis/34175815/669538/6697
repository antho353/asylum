[format["Your boom box has started playing %1!",_songDisplayName]]spawn life_fnc_handleMessage;private _toSend=allPlayers select{(_x distance player)<=350};[["initMusic",[_boomBox]],"life_fnc_boomBox",_toSend]spawn life_fnc_MP;};case("stopMusic"):{_boomBoxData params[["_boomBox",objNull,[objNull]]];(_boomBox getVariable["ga_boomBoxData",[]]) params[["_boomBoxOwnerObj",objNull,[objNull]],["_boomBoxOwnerUID","",[""]],["_boomBoxOwnerName","",[""]],["_boomBoxCurrentSong","",[""]],["_boomBoxCurrentSongDelay",0,[0]],["_boomBoxCurrentSongStartedServerTime",0,[0]]];if(_boomBoxOwnerUID isNotEqualTo(getPlayerUID player)) exitWith{};private _dialogQuestion=["Are you sure you want to stop the music for your Boom Box?","Boom Box MP3","Yes","No"]call BIS_fnc_guiMessage;if!(_dialogQuestion) exitWith{};_boomBox setVariable["ga_boomBoxData",[player,getPlayerUID player,profileName,""],true];};case("initMusic"):{_boomBoxData params[["_boomBox",objNull,[objNull]]];(_boomBox getVariable["ga_boomBoxData",[]]) params[["_boomBoxOwnerObj",objNull,[objNull]],["_boomBoxOwnerUID","",[""]],["_boomBoxOwnerName","",[""]],["_boomBoxCurrentSong","",[""]],["_boomBoxCurrentSongDelay",0,[0]],["_boomBoxCurrentSongStartedServerTime",0,[0]]];if(_boomBoxCurrentSong isEqualTo"") exitWith{};if((isNull life_boomBox)&&(_boomBoxOwnerUID isEqualTo(getPlayerUID player))) then{life_boomBox=_boomBox;};private _hiddenObject="Land_ClutterCutter_small_F"createVehicleLocal[0,0,0];_hiddenObject setPosATL(getPosATL _boomBox);_hiddenObject hideObject true;private _startSong=_boomBoxCurrentSong;private _songInstace=0;private _exit=false;while{!(isNull _boomBox)||!(isNull _hiddenObject)||(((_boomBox getVariable["ga_boomBoxData",[]]) param[3,""]) isEqualTo _startSong)}do{if(_exit) exitWith{};private _songInstace=(random 999999);profileNameSpace setVariable["ga_boomBoxSongInstance",_songInstace];_hiddenObject say3D[_boomBoxCurrentSong,60];for"_i"from 1 to _boomBoxCurrentSongDelay do{if(_exit) exitWith{};if((((_boomBox getVariable["ga_boomBoxData",[]]) param[3,""]) isNotEqualTo _startSong)||(_songInstace isNotEqualTo(profileNameSpace getVariable["ga_boomBoxSongInstance",999999]))) then{if!(isNull _hiddenObject) exitWith{deleteVehicle _hiddenObject;_exit=true;};}else{uiSleep 1;};};};if!(isNull _hiddenObject) then{deleteVehicle _hiddenObject;};if((((_boomBox getVariable["ga_boomBoxData",[]]) param[3,""]) isNotEqualTo"")&&(_songInstace isNotEqualTo(profileNameSpace getVariable["ga_boomBoxSongInstance",999999]))) then{["initMusic",[_boomBox]]spawn life_fnc_boomBox;};};case("startDance"):{if!(_subscriber) exitWith{};life_isDancing=true;private _toSend=allPlayers select{(_x distance player)<=200};[[(selectRandom["Acts_Dance_01","Acts_Dance_02"]),600,"switchMove",player],"life_fnc_handleAnim",_toSend]spawn life_fnc_MP;};case("stopDance"):{if!(_subscriber) exitWith{};life_isDancing=false;["",0,"switchMove",player]spawn life_fnc_handleAnim;};};