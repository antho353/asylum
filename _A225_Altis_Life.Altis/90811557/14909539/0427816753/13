private _unitText=if(_unit isEqualTo player) then{"yourself"}else{name _unit};private _text=format["Injecting %1 with adrenaline",_unitText];_progressText ctrlSetText format["%2 (0%1)...","%",_text];_progressBar progressSetPosition 0.00;private _counter=progressPosition _progressBar;private _animationState=animationState player;if(_unit isEqualTo player) then{player playActionNow"Medic"}else{player playActionNow"MedicOther"};private _isSuccess=for"_i"from 0 to 1 step 0 do{uiSleep 0.10;_counter=_counter+0.10;_progressBar progressSetPosition _counter;_progressText ctrlSetText format["%3 (%1%2)...",round(_counter*100),"%",_text];if(_counter>=1) exitWith{true};if(!life_action_in_use) exitWith{false};if(isWeaponDeployed player) exitWith{false};if(player getVariable["ga_restrained",false]) exitWith{false};if(player getVariable["ga_downed",false]) exitWith{false};if(!alive player) exitWith{false};false;};5 cutText["","PLAIN"];life_action_in_use=false;if(_isSuccess) exitWith{if(_unit isEqualTo player) then{[]call life_fnc_adrenalineShotEffect}else{[[player],"life_fnc_adrenalineShotEffect",_unit,false,false]spawn life_fnc_MP;};life_side_exp=life_side_exp+15;["adrenaline",1]call life_fnc_statArrUpdate;["action","adrenaline",1]spawn life_fnc_handleQuest;player playMoveNow _animationState;if(_useAdrenaline) then{[false,"adrenalineShot",1]call life_fnc_handleInv;};};