private _currentPoint=0;private _loopDelay=_totalTime/floor(100/_increment);private _text=if(_domeOpen) then{"Securing the Lockup"}else{"Defusing Explosives"};private _startCount=0;_progressBar progressSetPosition _startCount;_progressText ctrlSetText format["%1 (%2%3)",_text,_startCount,"%"];private _duration=20;private _animation="AinvPknlMstpSnonWnonDnon_medic_1";[_animation,_duration]spawn life_fnc_handleAnim;private _isSuccess=for"_i"from 0 to 1 step 0 do{uiSleep _loopDelay;if(isNull _progressBar) exitWith{false};_currentPoint=(progressPosition _progressBar)+(_increment/100);_progressBar progressSetPosition _currentPoint;_progressText ctrlSetText format["%1 (%2%3)",_text,round(_currentPoint*100),"%"];if(_currentPoint>=1) exitWith{true};if((speed player)>=2) exitWith{false};if(player distance _startPosition>5) exitWith{false};if!(isNull objectParent player) exitWith{false};if(!life_action_in_use||!alive player) exitWith{false};false;};life_action_in_use=false;[]spawn life_fnc_handleAnim;5 cutText["","PLAIN"];if!(_isSuccess) then{["You have failed to secure the lockup.","basic"]spawn life_fnc_handleMessage;};_domeOpen=life_evidence_dome getVariable["ga_evidenceOpen",false];_plantedBomb=life_evidence_dome getVariable["ga_bombPlanted",false];if(!_domeOpen&&!_plantedBomb) exitWith{["The evidence lockup doesn't require securing anymore.","basic"]spawn life_fnc_handleMessage;};