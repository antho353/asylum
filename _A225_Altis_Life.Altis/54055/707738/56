};};_buyList lbSetTextRight[_idx,format["($%1)",[_price]call life_fnc_numberText]];_buyList lbSetText[_idx,_name];_buyList lbSetData[_idx,_item];_buyList lbSetValue[_idx,round(_price)];_buyList lbSetPicture[_idx,["getIcon",_item]call life_fnc_virtItemCfg];_itemIndex=_itemIndex+1;}forEach _buyItems;{_x params[["_item",""]];private _qtyInInventory=missionNameSpace getVariable[format["life_inv_%1",_item],0];if(_qtyInInventory>=1) then{private _name=["getName",_item]call life_fnc_virtItemCfg;private _price=if((_item in _buyItems)&&(_item in _sellItems)) then{private _buyPrice=["getBasePrice",_item]call life_fnc_virtItemCfg;_buyPrice=_buyPrice*([_shopType,true]call life_fnc_getDiscount);private _sellPrice=["getLowestPrice",_item]call life_fnc_virtItemCfg;_sellPrice=_sellPrice*([_shopType,false]call life_fnc_getDiscount);selectMin[_sellPrice,_buyPrice];}else{private _sellPrice=["getLowestPrice",_item]call life_fnc_virtItemCfg;if(_item=="goldbar"&&(life_gang_data select 0) isEqualTo(zaros_flag getVariable["ga_turf_data",[]]select 0)) then{_sellPrice=_sellPrice*1.1}else{_sellPrice};_sellPrice*([_shopType,false]call life_fnc_getDiscount);};private _idx=_sellList lbAdd format["%1x %2",_qtyInInventory,_name];_sellList lbSetData[_idx,_item];_sellList lbSetValue[_idx,floor(_price)];_sellList lbSetPicture[_idx,["getIcon",_item]call life_fnc_virtItemCfg];};}forEach _sellItems;_buyButton ctrlEnable true;_sellButton ctrlEnable true;