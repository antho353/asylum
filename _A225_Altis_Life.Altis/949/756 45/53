if!(params[["_startPos",[],[[]]],["_missileType","",[""]],["_missileSpeed",0,[0]],["_target",objNull,[objNull]],["_radius",0,[0]]]) exitWith{diag_log"Missile Launch Failed at params";};if(life_missileActive) exitWith{};life_missileActive=true;for"_i"from 1 to 15 do{if!(isNull objectParent player) then{playSound"missileLocking";};if(_target distance2d _startPos>_radius) exitWith{};uiSleep 0.4;};if(_target distance2d _startPos>_radius) exitWith{uiSleep 2;life_missileActive=false;};private _missile=_missileType createVehicle _startPos;_missile setPos _startPos;private _maxDuration=time+17;private _playSound=0;[_missile,_maxDuration]spawn{params["_missile","_maxDuration"];private _flare=objNull;while{alive _missile}do{if(time>_this select 1||isNull _missile) exitWith{};_flare="CMflare_Chaff_Ammo"createVehicle getPos(_missile);_flare attachTo[_missile,[0,0,0]];uiSleep 3;deleteVehicle _flare;};};while{alive _missile}do{private _targetPosition=getPosASL _target;private _missilePosition=getPosASL _missile;if(!(lineIntersects[_targetPosition,_missilePosition,_target,_missile])&&!(terrainIntersect[getPosATL _missile,getPosATL _target])) then{_targetPosition set[2,((_targetPosition select 2)+1)];