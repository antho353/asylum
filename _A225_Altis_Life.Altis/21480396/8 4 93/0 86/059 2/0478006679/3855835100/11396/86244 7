#include"..\..\..\..\..\..\..\macro.h"
if(scriptAvailable(5)) exitWith{["You spam this action...","basic"]spawn life_fnc_handleMessage;};params[["_type","",[""]],["_controlData",[],[[]]]];private _asy_display=findDisplay 388000;if(isNull _asy_display) exitWith{};private _filterList=_asy_display displayCtrl 388002;private _mainListGroup=_asy_display displayCtrl 388004;private _mainItemList=_mainListGroup controlsGroupCtrl 1000;private _mainItemListBackground=_mainListGroup controlsGroupCtrl 1003;private _sideListGroup=_asy_display displayCtrl 388005;private _sideItemList=_sideListGroup controlsGroupCtrl 1000;private _sideItemListButton=_sideListGroup controlsGroupCtrl 1001;private _deleteButton=_sideListGroup controlsGroupCtrl 1005;private _saveButton=_sideListGroup controlsGroupCtrl 1004;{_x ctrlEnable false;}forEach[_deleteButton,_saveButton,_sideItemListButton];private _indexValZero=(_sideItemList lnbValue[lbCurSel _sideItemList,0]);private _indexValOne=(_sideItemList lnbValue[lbCurSel _sideItemList,1]);private _message=if(_indexValZero isEqualTo-4) then{"Are you sure you want to save your current loadout to an empty slot?"}else{"Are you sure you want to update the selected loadout with your current loadout?"};private _action=[_message,"Loadout Save Confirmation","Continue","Cancel"]call BIS_fnc_guiMessage;if!(_action) exitWith{};["<t align='center'>Enter desired loadout name.</t>","Loadout Name","Submit"]call life_fnc_inputMenu;if(life_input_response isEqualTo"") exitWith{["You failed to enter a name.",""]spawn life_fnc_handleMessage;};private _loadoutName=life_input_response;life_input_response="";if(((_loadoutName find"call ")!=-1)||((_loadoutName find"spawn ")!=-1)||((_loadoutName find"execVM")!=-1)||((_loadoutName find"_fnc_")!=-1)) exitWith{["Invalid loadout name. Please try again.","basic"]spawn life_fnc_handleMessage};private _length=count(toArray _loadoutName);private _chrByte=toArray _loadoutName;private _allowed=toArray("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_ ");