_playerList ctrlSetPosition[_panelX+_padding,_panelY+_padding,_progressW/2,_progressH];_playerList ctrlCommit 0;private _buttonGive=_asy_display ctrlCreate["RscButtonMenu",361004];_buttonGive ctrlSetPosition[_panelX+_padding+((_containerW/3)*1),_panelY+_padding+_progressH+(_progressH/6),_containerW/3,_progressH];_buttonGive ctrlSetText"Give";_buttonGive ctrlCommit 0;private _buttonUse=_asy_display ctrlCreate["RscButtonMenu",361005];_buttonUse ctrlSetPosition[_panelX+_padding+((_containerW/3)*0),_panelY+_padding+_progressH+(_progressH/6),_containerW/3,_progressH];_buttonUse ctrlSetText"Use";_buttonUse ctrlCommit 0;private _buttonDrop=_asy_display ctrlCreate["RscButtonMenu",361006];_buttonDrop ctrlSetPosition[_panelX+_padding+((_containerW/3)*2),_panelY+_padding+_progressH+(_progressH/6),_containerW/3,_progressH];_buttonDrop ctrlSetText"Drop";_buttonDrop ctrlCommit 0;private _centerX=getNumber(configfile>>"RscDisplayInventory">>"controls">>"BackgroundSlotPrimary">>"x");_offset=_centerX-0.5;{_x ctrlSetPosition[((ctrlPosition _x) select 0)-_offset,((ctrlPosition _x) select 1)];_x ctrlCommit 0}forEach(allControls _asy_display);[]spawn{disableSerialization;waitUntil{isNull(findDisplay 602)};life_virt_open=false};};private _itemList=_asy_display displayCtrl 361001;private _quantityInput=_asy_display displayCtrl 361002;private _playerList=_asy_display displayCtrl 361003;private _buttonGive=_asy_display displayCtrl 361004;private _buttonUse=_asy_display displayCtrl 361005;private _buttonDrop=_asy_display displayCtrl 361006;if(_newLoad) then{_itemList ctrlAddEventHandler["LBDblClick","[361001, 361002, false] spawn life_fnc_doubleClickItem"];_buttonGive ctrlAddEventHandler["ButtonClick","(_this select 0) ctrlEnable false; _this spawn life_fnc_giveItem; (_this select 0) ctrlEnable true"];_buttonUse ctrlAddEventHandler["ButtonClick","_this spawn life_fnc_useItem"];_buttonDrop ctrlAddEventHandler["ButtonClick","[] spawn life_fnc_dropItem"];};{lbClear _x}forEach[_itemList,_playerList];if(_asy_display isEqualTo(findDisplay 602)) then{private _progressBar=_asy_display displayCtrl 6501;private _progressText=_asy_display displayCtrl 6502;_progressBar progressSetPosition(life_carryWeight/life_maxWeight);_progressText ctrlSetStructuredText parseText format["<t align='center'>%1/%2</t>",life_carryWeight,life_maxWeight];};private _players=[];private _vehicle=vehicle player;private _units=if(_vehicle isEqualTo player) then[{player nearEntities["Man",10]},{crew _vehicle}];{if!((!isPlayer _x)||(_x isEqualTo player)) then{_players pushBack _x}}forEach _units;{if((!isNull _x)&&(alive _x)&&!(_x getVariable["ga_invisOn",false])) then{private _index=_playerList lbAdd format["%1",[name _x]call life_fnc_cleanName];if(_isPhone) then{_playerList lbSetTextRight[_index,format["[%1]",side _x]]};_playerList lbSetData[_index,getPlayerUID _x];};}forEach _players;{_x ctrlEnable((lbSize _playerList)>=1)}forEach[_playerList,_buttonGive];if((lbSize _playerList)>=1) then{_playerList lbSetCurSel 0};{_x params["_keys"];private _text=switch(_forEachIndex) do{case 0:{"Loot Crate Keys"};case 1:{"Guardian Crate Keys"};case 2:{"Aggressor Crate Keys"};case 3:{"Destruction Crate Keys"};case 4:{"Revival Crate Keys"};case 5:{"Horn Crate 1 Keys"};case 6:{"Horn Crate 2 Keys"};case 7:{"Crypto Crate Keys"};case 8:{"Camo Crate 1 Keys"};case 9:{"Camo Crate 2 Keys"};case 10:{"Blasphemy Crate Keys"};default{""};};if(_keys>=1) then{private _index=_itemList lbAdd format["%1x - %2",[_keys]call life_fnc_numberText,_text];_itemList lbSetPicture[_index,"icons\lootcrate_key.paa"];_itemList lbSetData[_index,format["cratekey_%1",_forEachIndex]];};}forEach life_lootKeys;{private _index=_itemList lbAdd format["%1's scalp",_x select 2];_itemList lbSetPicture[_index,format["icons\%1.paa","skull"]];_itemList lbSetData[_index,""];}forEach life_infamyScalps;{_x params["_item"];private _quantity=missionNameSpace getVariable[_x,0];if(_quantity>=1) then{private _name=["getName",_item]call life_fnc_virtItemCfg;private _short=["getShortName",_item]call life_fnc_virtItemCfg;if((_short isEqualTo"humanscalp")&&((profileNamespace getVariable["ga_recent_scalp",[0,0,""]]select 2)!="")) then{_name=format["%1's Scalp",(profileNamespace getVariable["ga_recent_scalp",[0,0,""]]select 2)];};private _index=_itemList lbAdd format["%1x - %2 ",[_quantity]call life_fnc_numberText,_name];_itemList lbSetPicture[_index,["getIcon",_short]call life_fnc_virtItemCfg];_itemList lbSetData[_index,_short];};}forEach([1]call life_fnc_virtItemCfg);