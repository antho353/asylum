#include"..\..\..\macro.h"
if((life_cashCache!=((life_cash/4)+7))||(life_atmcashCache!=((life_atmcash/4)+5))) exitWith{[["-HACKEDMONEY-",player,profileName,format["File: %1 - money tampering attempted! Cash: %2 - Expected cash: %3 | Bank: %4 - Expected bank: %5.",_fnc_scriptName,[life_cash]call life_fnc_numberText,[((life_cashCache-7)*4)]call life_fnc_numberText,[life_atmCash]call life_fnc_numberText,[((life_atmCashCache-5)*4)]call life_fnc_numberText]],"TON_fnc_logIt",2]spawn life_fnc_MP;[[profileName,"Attempting to hack money variable."],"life_fnc_notifyAdmins",-2,false]spawn life_fnc_MP;["MemHackCash",false,false]call compile PreProcessFileLineNumbers"\a3\functions_f\Misc\fn_endMission.sqf";};params[["_house",objNull,[objNull]]];if(ASY_Server isEqualTo 2) exitWith{["Home buying is currently disabled on Server 2.","basic"]spawn life_fnc_handleMessage;};if!(alive _house) exitWith{["The building you're trying to buy is too damaged at this time for purchasing. Please wait until after a server restart to purchase this home.","basic"]spawn life_fnc_handleMessage;};if(damage _house>0.15) exitWith{["The building you're trying to buy is too damaged at this time for purchasing. Please wait until after a server restart to try and purchase this home.","basic"]spawn life_fnc_handleMessage;};if(life_houseTxn) exitWith{["You are currently in the process of buying or selling a home.","basic"]spawn life_fnc_handleMessage;};if(isNull _house) exitWith{};if!(_house isKindOf"House_F") exitWith{};if!(playerSide isEqualTo civilian) exitWith{};if!(license_civ_home) exitWith{["You do not have a home owners license!","basic"]spawn life_fnc_handleMessage;};if(!isNil{(_house getVariable"ga_house_sold")}) exitWith{["This house was recently sold and is still being processed by the server.","basic"]spawn life_fnc_handleMessage;};if(life_action_in_use) exitWith{["You are currently busy performing another action...","basic"]spawn life_fnc_handleMessage;};if(_house getVariable["ga_restricted_house",false]) exitWith{["This house cannot be purchased.","basic"]spawn life_fnc_handleMessage;};if(!(_house getVariable["ga_homeOwner",""]isEqualTo"")&&(_house getVariable["ga_house_price",-1]isEqualTo-1)) exitWith{["This house is already owned and not for sale!","basic"]spawn life_fnc_handleMessage;};if(isNil{_house getVariable"ga_house_price"}&&!(isNil{_house getVariable"ga_houseID"})) exitWith{["This house is already owned and not for sale!","basic"]spawn life_fnc_handleMessage;};closeDialog 0;private _forSale=if(_house getVariable["ga_house_price",-1]>0) then{true}else{false};private _houseCfg=[typeOf _house]call life_fnc_houseConfig;if(_houseCfg isEqualTo[]) exitWith{};_houseCfg params[["_buyPrice",-1],["_sellPrice",-1],["_physInv",[]],["_virtInv",[]]];private _maxPhys=((_physInv select((count _physInv)-1)) select 0);private _maxVirt=((_virtInv select((count _virtInv)-1)) select 0);private _curPhys=0;private _curVirt=0;private _hasBarrel="EMPTY";private _hasGreenhouse="EMPTY";private _hasLeadContainer="EMPTY";private _canAgeBarrel=if!((typeOf _house) in["Land_i_Garage_V1_F","Land_i_Garage_V2_F","Land_i_Garage_V1_dam_F","Land_i_Garage_V2_dam_F"]) then{"supports"}else{"does not support"};private _canAgeGreenhouse=if!((typeOf _house) in["Land_i_Garage_V1_F","Land_i_Garage_V2_F","Land_i_Garage_V1_dam_F","Land_i_Garage_V2_dam_F"]) then{"supports"}else{"does not support"};private _canAgeLeadContainer=if!((typeOf _house) in["Land_i_Garage_V1_F","Land_i_Garage_V2_F","Land_i_Garage_V1_dam_F","Land_i_Garage_V2_dam_F"]) then{"supports"}else{"does not support"};