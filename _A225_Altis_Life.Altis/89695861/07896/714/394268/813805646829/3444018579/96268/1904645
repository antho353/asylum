params[["_vendor",objNull,[objNull]],"","",["_type","",[""]]];private _indexArray=[];private _processArray=[["cement",[[["rock",1]],"cement",3,"Mixing Cement",0]],["cocaine",[[["cocaine",1]],"cocainep",0,"Processing Cocaine",1]],["copper",[[["copperore",1]],"copper_r",7,"Processing Copper",0]],["crank",[[["ephedrau",1],["phos",1],["hydro",1]],"crank",0,"Mixing Ingredients",0]],["crankp",[[["crank",1]],"crankp",0,"Cooking Crank",0]],["diamond",[[["diamond",1]],"diamondc",15,"Processing Diamond",0]],["drilledoil",[[["oilu",1]],"oilp",10,"Processing Oil",0]],["heroin",[[["heroinu",1]],"heroinp",0,"Processing Heroin",1]],["iron",[[["ironore",1]],"iron_r",11,"Processing Iron",0]],["marijuana",[[["cannabis",1]],"marijuana",0,"Processing Marijuana",1]],["marijuanam",[[["cannabis",1]],"marijuanam",0,"Processing Medical Marijuana",0]],["meth",[[["ephedra",1]],"meth",0,"Cooking Meth",1]],["methcocktail",[[["ephedrau",1],["phos",1],["hydro",1]],"ephedra",0,"Mixing Ingredients",0]],["oil",[[["oilb",1]],"oilp",10,"Processing Oil",0]],["plate",[[["plateMetal",1]],"plate",0,"Pressing Plate",0]],["rock",[[["rock",1]],"rock",0,"Examining Stone",0]],["rum",[[["water",1],["yeast",1],["sugar",1]],"rum_0",0,"Distilling Spirits",3]],["rumsalt",[[["saltwater",1],["yeast",1],["sugar",1]],"rum_0",0,"Distilling Spirits",3]],["salt",[[["salt",1],"salt_r",4,"Processing Salt",0]],["sand",[[["sand",1]],"glass",6,"Processing Sand",0]],["scotch",[[["water",1],["yeast",1],["barley",1]],"scotch_0",0,"Distilling Spirits",3]],["cement",[[["scotch_2",1]],"scotch_3",0,"Adding Aging Chemicals",3]],["scotchsalt",[[["saltwater",1],["yeast",1],["barley",1]],"scotch_0",0,"Distilling Spirits",3]],["timber",[[["timber",1]],"plank",0,"Processing Pine Timber",0]],["timberh",[[["timberh",1]],"plankh",0,"Processing Hardwood Timber",0]],["timberl",[[["timberl",1]],"plankl",0,"Processing Olive Timber",0]],["uraniump",[[["uraniumu",1]],"uraniump",0,"Enriching Uranium Ore",0]],["whiskeyc",[[["water",1],["yeast",1],["barley",1],["corn",1]],"whiskeyc_0",0,"Distilling Spirits",3]],["whiskeycsalt",[[["saltwater",1],["yeast",1],["barley",1],["corn",1]],"whiskeyc_0",0,"Distilling Spirits",3]],["whiskeyr",[[["water",1],["yeast",1],["barley",1],["rye",1]],"whiskeyr_0",0,"Distilling Spirits",3]],["whiskeyrsalt",[[["saltwater",1],["yeast",1],["barley",1],["rye",1]],"whiskeyr_0",0,"Distilling Spirits",3]]];{if(_x select 0 isEqualTo _type) exitWith{_indexArray=_x;};}forEach _processArray;if(_indexArray isEqualTo[]) exitWith{["You don't have the items necessary.","basic"]spawn life_fnc_handleMessage;};_indexArray params["_type","_input","_output","_cost","_text","_capIndex"];private _exit=false;private _inputVals=[];{private _itemCount=missionNamespace getVariable(format["life_inv_%1",_x select 0]);_inputVals pushBack _itemCount;if(_itemCount<_x select 1) exitWith{_exit=true};}forEach _input;private _inputCount=selectMin _inputVals;if(_exit||_inputVals isEqualTo[]) exitWith{["You don't have the items necessary.","basic"]spawn life_fnc_handleMessage;};private _nBuilding=nearestBuilding player;if(_input in["crank","crankp"]&&(player distance _nBuilding<=10)) exitWith{["You're too close to a building to be messing with a mobile lab.","basic"]spawn life_fnc_handleMessage;};disableSerialization;5 cutRsc["life_progress","PLAIN"];private _ui=uiNamespace getVariable"life_progress";private _progress=_ui displayCtrl 38201;private _pgText=_ui displayCtrl 38202;_pgText ctrlSetText format["%2 (1%1)...","%",_text];_progress progressSetPosition 0.01;private _cP=0.01;life_is_processing=true;life_action_in_use=true;private _success=false;private _sleep=_inputCount*0.03;private _vehicle=cursorObject;for"_i"from 0 to 1 step 0 do{uiSleep _sleep;