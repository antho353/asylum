#include"..\..\macro.h"
params["_isVirtual","_isUp"];disableSerialization;if(!life_didServerRespond) exitWith{["Awaiting server response, try again in a few seconds...","basic"]spawn life_fnc_handleMessage};private _lbSelected=lbCurSel 4502;if(_lbSelected isEqualTo-1) exitWith{};private _playerItemSelected=getSelData(4502);if(_playerItemSelected isEqualTo"") exitWith{};private _vehPos=getPos life_trunk_vehicle;private _playerPos=getPos player;if(_vehPos distance _playerPos>10) exitWith{["You are too far away!","basic"]spawn life_fnc_handleMessage;closeDialog 0;};private _trunkDetails=if(_isVirtual) then{(life_trunk_vehicle getVariable["ga_vinv",[[],0]]);}else{(life_trunk_vehicle getVariable["ga_pinv",[[],0]]);};private _trunkInv=_trunkDetails select 0;private _trunkWeight=_trunkDetails select 1;private _trunkLength=count _trunkInv;if(((_lbSelected isEqualTo 0)&&_isUp)||((_lbSelected isEqualTo(_trunkLength-1))&&!(_isUp))) exitWith{};private _arrayItemSelected=_trunkInv select _lbSelected;