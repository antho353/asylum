#include"..\..\macro.h"
if(scriptAvailable(0.75)) exitWith{["Please don't spam charges!","basic"]spawn life_fnc_handleMessage;};params[["_unitUID",""]];if(_unitUID isEqualTo"") exitWith{closeDialog 0;};disableSerialization;if(isNull(findDisplay 5520)) exitWith{};if((lbCurSel 5522) isEqualTo-1) exitWith{["No charge selected","basic"]spawn life_fnc_handleMessage;};private _display=findDisplay 5520;waitUntil{!isNull _display};private _title=_display displayCtrl 5521;private _list=_display displayCtrl 5522;private _input=_display displayCtrl 5523;private _button=_display displayCtrl 5524;private _players=allPlayers;private _unit=_players param[_players findIf{((getPlayerUID _x) isEqualTo _unitUID)&&!((side _x) isEqualTo west)},objNull];if(isNull _unit) exitWith{closeDialog 0};private _inputAmount=parseNumber(ctrlText _input);private _max=5;if(_inputAmount>_max) then{systemChat format["You cannot charge someone with more than %1 crimes at once!",_max];