params[["_captureFlagObj",objNull,[objNull]]];if(life_gang_data param[0,-1]isEqualTo-1) exitWith{};if(_captureFlagObj isNotEqualTo gang_fortress_flag) exitWith{};(_captureFlagObj getVariable["ga_gang_fortress_data",[-1,"Unknown",false,"Unknown",grpNull]]) params[["_gangID",-1,[0]],["_gangName","Unknown",[""]],["_active",false,[false]],["_playerCapturer","Unknown",[""]],["_capturerGroup",grpNull,[grpNull]]];life_gang_data params[["_playerGangID",-1,[0]],["_playerGangName","Unknown",[""]]];private _ownsTurf=(([rodo_flag,zaros_flag,panagia_flag]findIf{(_x getVariable["ga_turf_data",[-1]]param[0,-1]) isEqualTo(life_gang_data param[0,-1])}) isNotEqualTo-1);private _maxPlayers=6;if(_playerGangID isEqualTo-1) exitWith{["You must be in a gang to capture the fortress flag!","basic"]spawn life_fnc_handleMessage;};if(_ownsTurf) exitWith{["You can't own any turfs to cap the gang fortress!","basic"]spawn life_fnc_handleMessage;};if(_gangID isEqualTo _playerGangID) exitWith{["Your gang is already controlling the Gang Fortress flag!","basic"]spawn life_fnc_handleMessage;};if((currentWeapon player) in["","Binocular","Rangefinder","hgun_Pistol_Signal_F"]) exitWith{["You can't take the gang fortress without a weapon.","basic"]spawn life_fnc_handleMessage;};private _friendlyInArea=allPlayers select{(_x distance2D(getMarkerPos"gang_fortress_marker")<=3500)&&((group _x isEqualTo(group player))||((_x getVariable["gang_data",[-1]]select 0) isEqualTo _playerGangID))};if(count _friendlyInArea>_maxPlayers) exitWith{[format["The Gang Fortress can't be captured with more than %1 players 3.5 km from the center of the flag!",_maxPlayers],"basic"]spawn life_fnc_handleMessage;};if(life_capturingCartel) exitWith{};life_capturingCartel=true;private _defaultFlagName="Gang Fortress";private _text=format["Capturing %1 for %2",_defaultFlagName,_playerGangName];5 cutRsc["life_progress","PLAIN"];private _ui=uiNameSpace getVariable"life_progress";