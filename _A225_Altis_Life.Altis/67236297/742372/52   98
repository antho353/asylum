private _display=uiNameSpace getVariable["life_progress",displayNull];private _progressBar=_display displayCtrl 38201;private _progressText=_display displayCtrl 38202;life_action_in_use=true;private _increment=1;private _totalTime=if(41 in life_side_talents) then{60}else{105};private _currentPoint=0;private _loopDelay=_totalTime/floor(100/_increment);private _text="Hacking vault security locks";private _startCount=0;_progressBar progressSetPosition _startCount;_progressText ctrlSetText format["%1 (%2%3)",_text,_startCount,"%"];private _duration=20;private _animation="AinvPknlMstpSnonWnonDnon_medic_1";[_animation,_duration]spawn life_fnc_handleAnim;private _isSuccess=for"_i"from 0 to 1 step 0 do{uiSleep _loopDelay;if(isNull _progressBar) exitWith{[2,"You have failed to hack the vault."]call life_fnc_broadcast;false};_currentPoint=(progressPosition _progressBar)+(_increment/100);_progressBar progressSetPosition _currentPoint;_progressText ctrlSetText format["%1 (%2%3)",_text,round(_currentPoint*100),"%"];if(_currentPoint>=1) exitWith{true};if((speed player)>=2) exitWith{[2,"You have failed to hack the vault."]call life_fnc_broadcast;false};if!((vehicle player) isEqualTo player) exitWith{[2,"You have failed to hack the vault."]call life_fnc_broadcast;false};if(player getVariable["ga_downed",false]||player getVariable["ga_restrained",false]) exitWith{[2,"You have failed to hack the vault."]call life_fnc_broadcast;false};if((!life_action_in_use)||(!alive player)||((player distance _closestVaultDoorPos)>=4)) exitWith{[2,"You have failed to hack the vault."]call life_fnc_broadcast;false};if(["fed"]call life_fnc_activeFederalEvent) exitWith{["There is already another Federal Event happening.","basic"]spawn life_fnc_handleMessage;false};false;};life_action_in_use=false;[]spawn life_fnc_handleAnim;5 cutText["","PLAIN"];if(_isSuccess) then{private _doorCount=getNumber(configFile>>"CfgVehicles">>(typeOf _vault)>>"numberOfDoors");for"_i"from 1 to _doorCount do{_vault setVariable[format["bis_disabled_door_%1",_i],0,true]};_vault setVariable["ga_vaultlocked",0,true];life_side_exp=life_side_exp+50;[2,"The vault doors have been hacked, and are now unlocked."]call life_fnc_broadcast;{_vault animate[_x,0,true]}forEach((animationNames _vault) select{(_x find"locked") isEqualTo-1});if!(life_fed_robbed select 0) then{[[player],"TON_fnc_fedRobbery",2]spawn life_fnc_MP;};};