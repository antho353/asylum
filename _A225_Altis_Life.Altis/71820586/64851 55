if!(_class isEqualTo"") then{if!((_class in _magazines)||(toLower _class in _compatibleItems)) exitWith{};([_class]call life_fnc_fetchCfgDetails) params["_class","_displayName","_picture"];_displayName=if!(_name isEqualTo"") then{_name}else{_displayName};if(_displayName isEqualTo"") exitWith{};private _color=[1,1,1,0.5];_price=if(life_bloodMoneyShop) then{_price}else{_price*_discount};_price=if(!life_bloodMoneyShop&&!(_shopType in["rebelwep","turf"])) then{_price}else{_price};_price=if(SRV_dominationCheapWeapons&&(call life_fnc_isDominationActive)) then{_price-(_price*0.45)}else{_price};private _formatText=if!(life_bloodMoneyShop) then{format["$%1",[round _price]call life_fnc_numberText]}else{format["%1 BM",[round _price]call life_fnc_numberText]};private _rowIndex=_sideItemList lnbAddRow[_displayName,_formatText];_sideItemList lnbSetPicture[[_rowIndex,0],_picture];_sideItemList lnbSetValue[[_rowIndex,1],round _price];_sideItemList lnbSetData[[_rowIndex,0],_class];if(call life_fnc_isDominationActive) then{_color set[3,1]}else{if(_shopType in["rebelwep","turf"]) then{if!(life_bloodMoneyShop) then{if(life_cash>=_price) then{_color set[3,1]};}else{if(life_bloodMoney>=_price) then{_color set[3,1]};};};if(((life_cash>=_price)||((life_atmcash>=_price)&&(life_inv_debitcard>=1)))&&!(_shopType in["rebelwep","turf"])) then{_color set[3,1]};};for"_columnIndex"from 0 to 1 do{_sideItemList lnbSetColor[[_rowIndex,_columnIndex],_color]};};}forEach _addons;[_sideItemList,0,false,false,controlNull,false]call life_fnc_listNBoxSort;_sideItemList ctrlSetFade 0.00;_sideItemList ctrlCommit 0.00;private _headerButtons=(allControls(ctrlParent _sideListGroup)) select{((ctrlClassName _x) isEqualTo"Life_RscListNBoxHeaderButton")&&((ctrlParentControlsGroup _x) isEqualTo _sideListGroup)};{_x ctrlEnable((lbSize _sideItemList)>=1)}forEach _headerButtons;if((_control isEqualTo _mainItemList)&&!(_selectedIndex isEqualTo-1)) then{_mainItemListButton ctrlEnable(((_mainItemList lnbColor[_selectedIndex,0]) select 3) isEqualTo 1)};if((_control isEqualTo _mainItemList)&&(_selectedIndex isEqualTo-1)) then{_mainItemListButton ctrlEnable false};