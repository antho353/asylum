_structuredString1=format["<t align='left' size='1.0'>Storage Type: Failed/Retracted Listing</t><br/><t align='left' size='1.0'>Item: %1 | %2</t>",_resourceDisplayName,([_itemClassname]call BIS_fnc_itemType select 1)];_structuredString2=format["<br/><t align='left' size='1.0' >Quantity: %1 Unit</t><br/><t align='left' size='1.0'>Failed/Retracted: %2 ago</t><br/><t align='left' size='1.0'>Expires In: %3</t><br/>",_itemQuantity,_createdServerTimeString,_createdServerTimeStringExpires];_rightInfoList ctrlSetStructuredText parseText format["%1%2",_structuredString1,_structuredString2];_itemPreview ctrlSetText _physImage;};};_itemPreview ctrlSetTextColor[1,1,1,1];_retrieveButton ctrlEnable true;_relistButton ctrlEnable true;};case"Purchased Listings":{private _listingData=parseSimpleArray(_control lnbData[_selectedIndex,0]);_listingData params["_storageID","_purchaserUID","_boughtFromUID","_itemClassname","_itemQuantity","_sellingPrice","_isVirtual","_isPhysical","_expiresTimeSeconds","_boughtTimeSeconds"];([(_expiresTimeSeconds/3600),((_expiresTimeSeconds%3600)/60),(_expiresTimeSeconds%60)]) params["_crHours","_crMinutes","_crSeconds"];_createdServerTimeString=format["%1 Hours and %2 Minutes",round _crHours,round _crMinutes,round _crSeconds];([(_boughtTimeSeconds/3600),((_boughtTimeSeconds%3600)/60),(_boughtTimeSeconds%60)]) params["_exHours","_exMinutes","_exSeconds"];_createdServerTimeStringExpires=format["%1 Hours and %2 Minutes",round _exHours,round _exMinutes,round _exSeconds];switch(true) do{case(_isVirtual isEqualTo 1):{_resourceDisplayName=["getName",_itemClassname]call life_fnc_virtItemCfg;_resourceImage=["getIcon",_itemClassname]call life_fnc_virtItemCfg;_isIllegalItem=["getIllegalPrice",_itemString]call life_fnc_virtItemCfg;_isIllegalItem=if(_isIllegalItem isEqualTo-1) then{"Legal"}else{"Illegal"};_structuredString1=format["<t align='left' size='1.0'>Storage Type: Purchased Listing</t><br/><t align='left' size='1.0'>Item: %1 | Virtual Item</t><br/><t align='left' size='1.0'>Legality: %2</t>",_resourceDisplayName,_isIllegalItem];_structuredString2=format["<br/><t align='left' size='1.0' >Quantity: %1 Unit(s)</t><br/><t align='left' size='1.0'>Bought: %2 ago</t><br/><t align='left' size='1.0'>Expires In: %3</t><br/>",_itemQuantity,_createdServerTimeString,_createdServerTimeStringExpires];_rightInfoList ctrlSetStructuredText parseText format["%1%2",_structuredString1,_structuredString2];_itemPreview ctrlSetText _resourceImage;};case(_isPhysical isEqualTo 1):{([_itemClassname]call life_fnc_fetchCfgDetails) params["_resourceString","_resourceDisplayName","_physImage"];_structuredString1=format["<t align='left' size='1.0'>Storage Type: Purchased Listing</t><br/><t align='left' size='1.0'>Item: %1 | %2</t>",_resourceDisplayName,([_itemClassname]call BIS_fnc_itemType select 1)];_structuredString2=format["<br/><t align='left' size='1.0' >Quantity: %1 Unit</t><br/><t align='left' size='1.0'>Bought: %2 ago</t><br/><t align='left' size='1.0'>Expires In: %3</t><br/>",_itemQuantity,_createdServerTimeString,_createdServerTimeStringExpires];_rightInfoList ctrlSetStructuredText parseText format["%1%2",_structuredString1,_structuredString2];_itemPreview ctrlSetText _physImage;};};_itemPreview ctrlSetTextColor[1,1,1,1];_retrieveButton ctrlEnable true;_relistButton ctrlEnable false;};};