params[["_caseType","",[""]],"_govData"];switch(_caseType) do{case("initGovClient"):{_govData params["_thisSelect29"];_thisSelect29=if(_thisSelect29 isEqualTo[]) then{[false,false,false,false,12391021,"ASSADFT3",-2200]}else{_thisSelect29};_thisSelect29 params["_isGov","_isCandidate","_hasVoted","_hasPardoned","_lastSessionID","_lastElectionID","_lastTimeConfigChanged"];private _newElection=!((SRV_governorData param[5,0]) isEqualTo _lastElectionID);private _serverRestarted=!(ASY_instance_id isEqualTo _lastSessionID);private _isGov=((SRV_governorData param[0,"GovUID"]) isEqualTo(getPlayerUID player));private _hasPardoned=switch(true) do{case(!_hasPardoned&&_serverRestarted):{false};case(_hasPardoned&&!_serverRestarted):{true};case(_hasPardoned&&_serverRestarted):{false};default{false};};private _hasVoted=switch(true) do{case(!_hasVoted&&_newElection):{false};case(_hasVoted&&!_newElection):{true};case(_hasVoted&&_newElection):{false};default{false};};private _isCandidate=switch(true) do{case(!_isCandidate&&_newElection):{false};case(_isCandidate&&!_newElection):{true};case(_isCandidate&&_newElection):{false};default{false};};private _lastTimeConfigChanged=if(_serverRestarted) then{-2200}else{_lastTimeConfigChanged};life_govTax set[0,_isGov];life_govClientData=[_isGov,_isCandidate,_hasVoted,_hasPardoned,ASY_instance_id,(SRV_governorData param[5,0]),_lastTimeConfigChanged];};case("newGovChosen"):{_govData params["_newGovData"];_newGovData params["_xPlayerUID","_xPlayerName","_voteCount"];["GovMessage",[format["%1 has been elected into Office of %2!",_xPlayerName,worldName]]]call BIS_fnc_showNotification;};case("updateConfig"):{_govData params["_updatedArray"];[["updateGovConfig",[_updatedArray]],"TON_fnc_govSystemSRV",2]spawn life_fnc_MP;[["configChanged",[_updatedArray]],"life_fnc_govSystem",-2]spawn life_fnc_MP;};case("payGovernor"):{_govData params[["_moneyToSend",0,[0]]];if(_moneyToSend<=100) exitWith{};if(_moneyToSend>150000) then{_moneyToSend=150000};if!((random 100)<=15) exitWith{};[["addTaxToCache",[_moneyToSend]],"TON_fnc_govSystemSRV",2]spawn life_fnc_MP;};case("toggleGovBuildingLocks"):{_govData params["_govBuilding"];private _isLocked=_govBuilding getVariable["ga_locked",false];private _buildingName=getText(configFile>>"CfgVehicles">>typeOf _govBuilding>>"displayName");private _numDoors=getNumber(configFile>>"CfgVehicles">>typeOf _govBuilding>>"numberOfDoors");if(_isLocked) then{_isLocked=false;[format["Unlocked all doors of your Governor Office",_buildingName],"basic"]spawn life_fnc_handleMessage;}else{_isLocked=true;[format["Locked all doors of your Governor Office",_buildingName],"basic"]spawn life_fnc_handleMessage;};_govBuilding setVariable["ga_locked",_isLocked,true];private _num=if(_isLocked) then{1}else{0};for"_i"from 1 to _numDoors do{_govBuilding setVariable[format["bis_disabled_Door_%1",_i],_num,true];if(_isLocked) then{_govBuilding animate[format["door_%1_rot",_i],0];{_govBuilding animate[_x,0]}forEach(animationNames _govBuilding);};};private _soundFile=if(_isLocked) then{"lock"}else{"unlock"};private _toSend=(allPlayers-[allDeadMen]) select{(_x distance player)<=10};[[player,_soundFile],"life_fnc_playSound",_toSend,false,false]spawn life_fnc_MP;};case("configChanged"):{_govData params["_updatedArray"];_updatedArray params["_govUID","_govName","_govTax","_govIsWeedLegal","_govIsDeathPen","_govElectionID"];if(_govIsWeedLegal) then{"weed_1"setMarkerColorLocal"ColorGreen";"weed_2"setMarkerColorLocal"ColorGreen";"Weed_p_2"setMarkerAlphaLocal 1;}else{"weed_1"setMarkerColorLocal"ColorRed";"weed_2"setMarkerColorLocal"ColorRed";"Weed_p_2"setMarkerAlphaLocal 0;};if!(isNull life_govSpeaker) then{life_govSpeaker say3D["govSpeaker",1200];};private _weedText=if(_govIsWeedLegal) then{format["Weed is now legal"]}else{format["Weed is now illegal"]};private _deathPenText=if(_govIsDeathPen) then{format["Death Penalty is now legal"]}else{format["Death Penalty is now illegal"]};private _taxRate=format["Tax Rate is now %1%2",_govTax,"%"];[format["<t color='#FF0000'><t size='1.5'><t align='center'>Government Laws Changed<br/><br/></t></t></t>Governor %1 has changed the laws of %2!<br/><br/>%3<br/><br/>%4<br/><br/>%5",_govName,worldName,_taxRate,_weedText,_deathPenText],"shortwarning"]spawn life_fnc_handleMessage;