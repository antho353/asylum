#include"..\..\..\macro.h"
if(scriptAvailable(0.275)) exitWith{};if((life_cashCache!=((life_cash/4)+7))||(life_atmcashCache!=((life_atmcash/4)+5))) exitWith{[["-HACKEDMONEY-",player,profileName,format["File: %1 - money tampering attempted! Cash: %2 - Expected cash: %3 | Bank: %4 - Expected bank: %5.",_fnc_scriptName,[life_cash]call life_fnc_numberText,[((life_cashCache-7)*4)]call life_fnc_numberText,[life_atmCash]call life_fnc_numberText,[((life_atmCashCache-5)*4)]call life_fnc_numberText]],"TON_fnc_logIt",2]spawn life_fnc_MP;[[profileName,"Attempting to hack money variable."],"life_fnc_notifyAdmins",-2,false]spawn life_fnc_MP;["MemHackCash",false,false]call compile PreProcessFileLineNumbers"\a3\functions_f\Misc\fn_endMission.sqf";};params[["_shopType","",[""]],["_control",controlNull,[controlNull]]];disableSerialization;if((lbCurSel 2402) isEqualTo-1) exitWith{["You need to select an item to sell.","basic"]spawn life_fnc_handleMessage;};private _item=lbData[2402,lbCurSel 2402];private _price=lbValue[2402,lbCurSel 2402];private _amount=parseNumber(ctrlText 2405);private _inInventory=missionNameSpace getVariable[format["life_inv_%1",_item],0];private _itemName=["getName",_item]call life_fnc_virtItemCfg;if(_amount<=0) exitWith{["You need to sell at least one","basic"]spawn life_fnc_handleMessage;};if(_amount>_inInventory) exitWith{["You don't have that many items to sell!","basic"]spawn life_fnc_handleMessage;};private _rebelOutposts=["Rebelop_1","Rebelop_2","Rebelop_3","Rebelop_4","Rebelop_5","Rebelop_6"];if(_item isEqualTo"goldbar"&&(({player distance(getMarkerPos _x)<=200}count _rebelOutposts) isEqualTo 0)) exitWith{["You cannot sell this here!","basic"]spawn life_fnc_handleMessage};private _buffPercent=["questBuffs",false,_item]call life_fnc_getDiscount;private _addBuff=if(_buffPercent isEqualTo 0) then{0}else{(_price*_buffPercent)};_price=round((_price+_addBuff)*_amount);if([false,_item,_amount]call life_fnc_handleInv) then{(wongs_flag getVariable["ga_capData",[0,"Neutral",0.5]]) params["_flagGangID","_flagGangName","_progress"];private _extra="";if((_shopType=="wongs")&&!(life_wongsCartel select 0)&&((call life_adminLevel)<3)) then{private _cut=floor(_price*0.10);