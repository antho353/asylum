params[["_mode",-1,[0]]];if(_mode isEqualTo-1) exitWith{};if!(call life_subscribed) exitWith{["You must be an active subscriber to use this feature!"]spawn life_fnc_handleMessage};disableSerialization;switch(_mode) do{case 0:{waitUntil{!isNull(findDisplay 2900)};private _display=findDisplay 2900;private _ownedSprays=_display displayCtrl 1102;private _sprayCfg=["getCfg"]call life_fnc_sprayCanCfg;{_x params["_xIDX","_xName","_xPath","_xUnlocked"];if(_xUnlocked) then{private _index=_ownedSprays lbAdd format["%1",_xName];_ownedSprays lbSetData[_index,str _x];_ownedSprays lbSetPicture[_index,_xPath];_ownedSprays lbSetPictureColor[_index,[1,1,1,1]];_ownedSprays lbSetSelectColor[_index,[1,1,1,1]];if(_xIDX isEqualTo(profileNameSpace getVariable["ga_savedSprayImage",[]]param[0,0])) then{_ownedSprays lbSetCurSel _index;};};}forEach _sprayCfg;};case 1:{private _display=findDisplay 2900;private _ownedSprays=(_display displayCtrl 2901) controlsGroupCtrl 1102;private _chosenSpray=parseSimpleArray(_ownedSprays lbData(lbCurSel _ownedSprays));if(_chosenSpray isEqualTo[]) exitWith{};_chosenSpray params["_IDX","_Name","_Path","_Unlocked"];