};[true,"firstAidKit",2]call life_fnc_handleInv;uiSleep 1;player setPos _asy_pos;player setDir((direction player)+(player getRelDir _centerPosition));player setDamage 0;[]spawn{uiSleep 0.25;player playActionNow"halofreefall_non";player switchCamera"EXTERNAL";};private _task=player createSimpleTask["AE_BattleRoyale_Task"];_task setSimpleTaskDescription["","Battle Royale",""];_task setSimpleTaskDestination _centerPosition;_task setTaskState"Assigned";player setCurrentTask _task;["AE_BattleRoyale_Zone"]spawn{_this params[["_safeZoneMarker",""]];if(_safeZoneMarker isEqualTo"") exitWith{};for"_i"from 0 to 1 step 0 do{if((markerPos _safeZoneMarker) isEqualTo[0,0,0]) exitWith{};if!((backpack player) isEqualTo"B_Parachute") exitWith{};if(life_isDead||!(life_inEvent)) exitWith{life_inEvent=false};private _forceDeployAltitude=100;if(((position player) select 2)<=_forceDeployAltitude) then{player action["OpenParachute",player];};uiSleep 0.25;};};["AE_BattleRoyale_Zone"]spawn{_this params[["_safeZoneMarker",""]];if(_safeZoneMarker isEqualTo"") exitWith{};private _handle=ppEffectCreate["ColorCorrections",25000];_handle ppEffectEnable true;for"_i"from 0 to 1 step 0 do{if((markerPos _safeZoneMarker) isEqualTo[0,0,0]) exitWith{};if(life_isDead||!(life_inEvent)) exitWith{life_inEvent=false};if!((position player) inArea _safeZoneMarker) then{player setDamage((damage player)+0.005);_handle ppEffectAdjust[1,1,0,[1,1,1,0],[1,0,0,0.75],[0.75,0.25,0,1.0]];[500]call BIS_fnc_bloodEffect;}else{_handle ppEffectAdjust[1,1,0,[0,0,0,0],[1,1,1,1],[0.299,0.587,0.114,0],[-1,-1,0,0,0,0,0]];};_handle ppEffectCommit 0.50;uiSleep 0.50;};ppEffectDestroy _handle;};waitUntil{!life_inEvent};[[false,player],"TON_fnc_eventParticipants",2]spawn life_fnc_MP;["Respawn to be sent back to your previous position with your gear","warning"]spawn life_fnc_handleMessage;waitUntil{!life_isDead&&!(player distance(getMarkerPos"respawn_west")<1000)};uiSleep 10;if(life_isDead) then{["You have 45 seconds to respawn, in order to keep your pre-event position and loadout!","basic"]spawn life_fnc_handleMessage;uiSleep 45;};player removeSimpleTask _task;player setUnitLoadout _preEventLoadout;life_uniformBackpack_skins=_preEventSkins;if(surfaceIsWater _preEventPos) then{player setPosASL _preEventPos}else{player setPosATL _preEventPos};_asy_player setDamage 0;[player]joinSilent life_old_group;titleText["You have been given back your previous loadout","PLAIN"];[]spawn{uiSleep 0.5;[uniform player,"setUniform",""]call life_fnc_clothingTextures;[backpack player,"setBackpack",""]call life_fnc_clothingTextures;[]call life_fnc_hudUpdate;};