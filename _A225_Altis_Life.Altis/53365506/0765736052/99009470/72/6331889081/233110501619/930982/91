if((life_cashCache!=((life_cash/4)+7))||(life_atmcashCache!=((life_atmcash/4)+5))) exitWith{[["-HACKEDMONEY-",player,profileName,format["File: %1 - money tampering attempted! Cash: %2 - Expected cash: %3 | Bank: %4 - Expected bank: %5.",_fnc_scriptName,[life_cash]call life_fnc_numberText,[((life_cashCache-7)*4)]call life_fnc_numberText,[life_atmCash]call life_fnc_numberText,[((life_atmCashCache-5)*4)]call life_fnc_numberText]],"TON_fnc_logIt",2]spawn life_fnc_MP;[[profileName,"Attempting to hack money variable."],"life_fnc_notifyAdmins",-2,false]spawn life_fnc_MP;["MemHackCash",false,false]call compile PreProcessFileLineNumbers"\a3\functions_f\Misc\fn_endMission.sqf";};params["_target","_caller","_actionId","_arguments"];_arguments params[["_start",0,[0]]];if(_start isEqualTo 0) exitWith{if!(["Are you sure you want to abandon the job? The smugglers will take $3,000 for their troubles.","Drug Runner","Yes, I'm sure!","No, keep going",findDisplay 46,false,false]call BIS_fnc_guiMessage) exitWith{};life_drug_stage=4;};if!(playerSide isEqualTo civilian) exitWith{["Only civilians can perform drug delivery missions!","basic"]spawn life_fnc_handleMessage};if((count(nearestObjects[getMarkerPos format["drug_spawn_%1",_start],["Car","Ship","Air"],5]))>=1) exitWith{["Unable to continue as there's another vehicle on the plane spawn point!","basic"]spawn life_fnc_handleMessage};if!(["We'll supply you with the plane and drugs, but if you fail you'll be held liable for $15,000! Are you up for it?","Drug Runner","I'll do it!","No, I'm afraid.",findDisplay 46,false,false]call BIS_fnc_guiMessage) exitWith{};if(life_atmcash<15000) exitWith{["You don't have enough money in your bank account to put a deposit on the plane!","basic"]spawn life_fnc_handleMessage};life_atmcash=life_atmcash-15000;life_atmcashCache=((life_atmcash/4)+5);[1]call life_fnc_ClupdatePartial;[format["A deposit of $%1 was taken from your bank account.",[15000]call life_fnc_numberText],"basic"]spawn life_fnc_handleMessage;private _informant=switch(true) do{case(35 in life_side_talents):{(random 100)<20};case(36 in life_side_talents):{(random 100)<10};default{(random 100)<30};};private _plane="C_Plane_Civil_01_F"createVehicle(getMarkerPos format["drug_spawn_%1",_start]);_plane setDir(markerDir format["drug_spawn_%1",_start]);_plane setHitPointDamage["HitHull",0.5];_plane setFuel 0.5;[_plane]spawn{while{uiSleep 0.5;!isNull(_this select 0)}do{(_this select 0) action["cancelLand",(_this select 0)]}};_plane setVariable["ga_side","civ",true];_plane setVariable["ga_vinv",[[],0],true];_plane setVariable["ga_vcap",["getVirtCap","",typeOf _plane]call life_fnc_vehicleConfig,true];_plane setVariable["ga_vehOwners",[[getPlayerUID player,profileName]],true];_plane setVariable["ga_canChop",false,true];private _drugRunners=([1,2,3,4,5])-[_start];private _targetID=selectRandom _drugRunners;_drugRunners=_drugRunners-[_targetID];_drugRunners=_drugRunners+[_start];life_drug_end=missionNamespace getVariable(format["drugrunner_%1",_targetID]);life_drug_start=_target;private _totalDistance=life_drug_start distance life_drug_end;private _timer=time+(floor(((life_drug_start distance life_drug_end)*(0.3/1000))*60))+60;_timer=if(_timer<(time+180)) then[{time+180},{_timer}];private _startTime=time;private _instanceID=floor(random 999999);private _startLogTime=time;[["-AIRDRUGRUNNER-",player,(profileName),format["Air Drug Runner Started (ID: %1), Start Port: %2, Start Pos: %3, Time To Collect: %4 minutes",_instanceID,_start,getPosATL player,((_timer-60)/60)]],"TON_fnc_logIt",2,false,false]spawn life_fnc_MP;life_drug_distanceTraveled=0;private _task=player createSimpleTask[format["Delivery_%1",_start]];["DeliveryAssigned",["Collect the drugs"]]call BIS_fnc_showNotification;private _notice=format["Bring the plane to the drug runner airfield at location %1 and load it with the drugs. You have %2 minutes!",_targetID,floor((_timer-time)/60)];_task setSimpleTaskDescription[_notice,"Drug Running","Drug Running"];_task setSimpleTaskDestination(getPos life_drug_end);_task setTaskState"Assigned";player setCurrentTask _task;systemChat _notice;[_notice,"basic"]spawn life_fnc_handleMessage;if(_informant) then{private _message=format["You receive word that a plane may land at Drug Runner Airfield %1 to pickup drugs within the next %2 minutes.",_targetID,floor((_timer-time)/60)];[[_message,"copalert"],"life_fnc_handleMessage",west,false,false]spawn life_fnc_MP;};(findDisplay 12 displayCtrl 51) ctrlAddEventHandler["Draw",{(_this select 0) drawLine[getPos player,getPos life_drug_end,[0,0,1,1]]}];disableSerialization;5 cutRsc["life_progress","PLAIN"];private _display=uiNameSpace getVariable["life_progress",displayNull];private _progressBar=_display displayCtrl 38201;private _progressText=_display displayCtrl 38202;_progressText ctrlSetText"Time to collect";_progressBar progressSetPosition 1;life_drug_stage=1;private _completed=while{(_timer-time)>=0}do{_timeRemaining=toArray([_timer-time,"MM:SS"]call BIS_fnc_secondsToString);if((_timeRemaining select 0) in[48]) then{_timeRemaining deleteAt 0};_isSeconds=((_timeRemaining select 0) in[48]);_timeRemaining=toString(_timeRemaining);_progressText ctrlSetText format["Time to collect: %1 %2",_timeRemaining,if(_isSeconds) then[{"seconds"},{"minutes"}]];_progressBar progressSetPosition(1-((time-_startTime)/(_timer-_startTime)));_success=if(life_drug_stage isEqualTo 2) then{if(isNull _plane) exitWith{["Your plane could not be found!","basic"]spawn life_fnc_handleMessage;life_drug_stage=1;false};if((_plane distance life_drug_end)>50) exitWith{["The supplied plane must be within 50 meters to load the drugs!","basic"]spawn life_fnc_handleMessage;life_drug_stage=1;false};true }else{false};if(_success) exitWith{[true,0]};if(!alive player) exitWith{[false,1]};if((isNull _plane)||(!alive _plane)) exitWith{[false,2]};if(life_drug_stage isEqualTo 4) exitWith{[false,3]};[false,0];};if!(_completed select 0) exitWith{systemChat"The smugglers keep the $15,000 you loaned them to cover their expenses";switch(_completed select 1) do{case 1:{["DeliveryFailed",["You failed to collect the drugs because you died!"]]call BIS_fnc_showNotification;