#include"..\..\..\macro.h"
if(scriptAvailable(10)) exitWith{["You cannot rapidly drill for oil!","basic"]spawn life_fnc_handleMessage;};params[["_vehicle",objNull,[objNull]]];if(ASY_Server isEqualTo 2) exitWith{["This action is currently disabled on Server 2.","basic"]spawn life_fnc_handleMessage;};if(isNull _vehicle||life_action_in_use) exitWith{};if!(alive _vehicle) exitWith{systemChat"Error! Dead Vehicle"};(_vehicle getVariable["ga_vinv",[[],0]]) params["_currentItems","_currentWeight"];private _vehicleWeight=(["getVehicleRowParsed","",typeOf _vehicle]call life_fnc_vehicleConfig) select 10;life_is_processing=true;life_action_in_use=true;_vehicle enableRopeAttach false;[_vehicle,1200]call life_fnc_setVehicleIdle;disableSerialization;5 cutRsc["life_progress","PLAIN"];private _text="Filling vehicle with oil.";private _ui=uiNamespace getVariable"life_progress";private _progress=_ui displayCtrl 38201;private _pgText=_ui displayCtrl 38202;private _cP=if(_currentWeight>0) then{_currentWeight/_vehicleWeight}else{0.01};private _exit=false;_pgText ctrlSetText format["%2 (%3%1)...","%",_text,round(_cP*100)];_progress progressSetPosition _cP;private _sleep=(_vehicleWeight/0.925924)/100;if(70 in life_side_talents) then{_sleep=_sleep*.95};_sleep=_sleep*0.9;for"_i"from 0 to 1 step 0 do{uiSleep _sleep;_cP=_cP+0.01;_progress progressSetPosition _cP;_pgText ctrlSetText format["%3 (%1%2)...",round(_cP*100),"%",_text];