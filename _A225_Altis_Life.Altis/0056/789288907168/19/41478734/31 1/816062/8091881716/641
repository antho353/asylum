params[["_captureFlagObj",objNull,[objNull]]];if(life_gang_data isEqualTo[]) exitWith{};if!(call life_fnc_isDominationActive) exitWith{};if(life_dominationCapturingFlag) exitWith{};(_captureFlagObj getVariable["ga_domination_data",[-1,"Unknown"]]) params[["_gangID",-1,[0]],["_gangName","Unknown",[""]]];life_gang_data params[["_playerGangID",0,[0]],["_playerGangName","Unknown",[""]]];if(_gangID isEqualTo _playerGangID) exitWith{["Your gang is already in control of this capture point.","basic"]spawn life_fnc_handleMessage;};if((currentWeapon player) in["","Binocular","Rangefinder","hgun_Pistol_Signal_F"]) exitWith{["You can't take this capture point without a weapon.","basic"]spawn life_fnc_handleMessage;};if((_captureFlagObj getVariable["ga_domination_ticksLeft",300])<=0) exitWith{["This capture point has ran out of points! Wait for it to move!","basic"]spawn life_fnc_handleMessage;};private _friendlyInArea=allPlayers select{(getPos _x inPolygon life_dominationPoly)&&(_x getVariable["gang_data",[-1]]select 0) isEqualTo(life_gang_data select 0)};if(count _friendlyInArea>10) exitWith{["Capture points during domination can't be captured with more than 10 friendlys in the warzone!","basic"]spawn life_fnc_handleMessage;};life_dominationCapturingFlag=true;disableSerialization;5 cutRsc["life_progress","PLAIN"];private _display=uiNameSpace getVariable["life_progress",displayNull];private _progressBar=_display displayCtrl 38201;private _progressText=_display displayCtrl 38202;private _increment=1;private _totalTime=7;private _currentPoint=0;private _loopDelay=_totalTime/floor(100/_increment);private _defaultFlagName=["Capture Point: Alpha","Capture Point: Bravo","Capture Point: Charlie","Capture Point: Delta"]param[domination_flags find _captureFlagObj,"Capture Point"];private _text=format["Capturing %1",_defaultFlagName];private _pos=getPosATL _captureFlagObj;private _startCount=0;_progressBar progressSetPosition _startCount;_progressText ctrlSetText format["%1 (%2%3)",_text,_startCount,"%"];private _isSuccess=for"_i"from 0 to 1 step 0 do{uiSleep _loopDelay;if(isNull _progressBar) exitWith{["You have failed to cap!","basic"]spawn life_fnc_handleMessage;false};_currentPoint=(progressPosition _progressBar)+(_increment/100);