private _display=uiNameSpace getVariable["life_progress",displayNull];private _progressBar=_display displayCtrl 38201;private _progressText=_display displayCtrl 38202;life_action_in_use=true;private _increment=1;private _totalTime=if!(_useExplosive) then{25}else{10};private _currentPoint=0;private _loopDelay=_totalTime/floor(100/_increment);private _text=if!(_useExplosive) then{"Cracking safe security locks"}else{"Planting a demolition charge"};private _startCount=0;_progressBar progressSetPosition _startCount;_progressText ctrlSetText format["%1 (%2%3)",_text,_startCount,"%"];private _duration=if(_useExplosive) then{5.882}else{20};private _animation=if(_useExplosive) then{"AinvPknlMstpSnonWnonDnon_medic_1"}else{"AinvPknlMstpSnonWnonDnon_medic_1"};[_animation,_duration]spawn life_fnc_handleAnim;private _isSuccess=for"_i"from 0 to 1 step 0 do{uiSleep _loopDelay;if(isNull _progressBar) exitWith{[2,"You have failed to hack the safe."]call life_fnc_broadcast;false};_currentPoint=(progressPosition _progressBar)+(_increment/100);_progressBar progressSetPosition _currentPoint;_progressText ctrlSetText format["%1 (%2%3)",_text,round(_currentPoint*100),"%"];if(_currentPoint>=1) exitWith{true};if((speed player)>=2) exitWith{[2,"You have failed to hack the safe."]call life_fnc_broadcast;false};if!((vehicle player) isEqualTo player) exitWith{[2,"You have failed to hack the safe."]call life_fnc_broadcast;false};if((!life_action_in_use)||(!alive player)||((player distance _closestSafeDoorPos)>=3)) exitWith{[2,"You have failed to hack the safe."]call life_fnc_broadcast;false};if(player getVariable["ga_downed",false]||player getVariable["ga_restrained",false]) exitWith{[2,"You have failed to hack the safe."]call life_fnc_broadcast;false};if(["fed"]call life_fnc_activeFederalEvent) exitWith{["There is already another Federal Event happening.","basic"]spawn life_fnc_handleMessage;false};false;};life_action_in_use=false;[]spawn life_fnc_handleAnim;5 cutText["","PLAIN"];if(_isSuccess) then{if(_useExplosive) then{[false,"demoCharge",1]call life_fnc_handleInv;private _toSend=(allPlayers-[allDeadMen]) select{(_x distance player)<=30};[2,"Blasting charge activated, move away from the door."]call life_fnc_broadcast;[[player,"bombarm"],"life_fnc_playSound",_toSend,false,false]spawn life_fnc_MP;uiSleep 2.5;private _demoChargeClass="GrenadeHand";private _maxTime=serverTime+6;private _demoCharge=_demoChargeClass createVehicle _closestSafeDoorPos;private _asy_pos=_closestSafeDoorPos;while{(!isNull _demoCharge)&&(serverTime<_maxTime)}do{_demoCharge setPos _asy_pos;uiSleep 0.01};{_safe animate[_x,0.2]}forEach((animationNames _safe) select{(_x find _closestSafeDoor)>=0});};private _doorCount=getNumber(configFile>>"CfgVehicles">>(typeOf _safe)>>"numberOfDoors");for"_i"from 1 to _doorCount do{_safe setVariable[format["bis_disabled_door_%1",_i],0,true]};_safe setVariable["ga_vaultlocked",0,true];life_side_exp=life_side_exp+25;[2,"The safe doors have been breached, and are now unlocked."]call life_fnc_broadcast;["fedsafeopened",1]call life_fnc_statArrUpdate;if!(life_fed_robbed select 0) then{[[player],"TON_fnc_fedRobbery",2]spawn life_fnc_MP;};};