private _asylumMyAsylum=_asy_display ctrlCreate["AsylumMyAsylumButton",-1];_asylumMyAsylum ctrlSetText"My Asylum";_asylumMyAsylum ctrlSetTooltip"Open your MyAsylum";_asylumMyAsylum ctrlSetPosition[1*GUI_GRID_W+GUI_GRID_X,8.6*GUI_GRID_H+GUI_GRID_Y,15*(((safezoneW/safezoneH) min 1.2)/40),1*((((safezoneW/safezoneH) min 1.2)/1.2)/25)];private _asylumHeader=_asy_display ctrlCreate["Life_EscapeMenuHeader",-1];_asylumHeader ctrlSetStructuredText parseText"<t font='PuristaMedium'>ASYLUM GAMING</t>";_asylumHeader ctrlSetPosition[1*GUI_GRID_W+GUI_GRID_X,7.5*GUI_GRID_H+GUI_GRID_Y,15*(((safezoneW/safezoneH) min 1.2)/40),1*((((safezoneW/safezoneH) min 1.2)/1.2)/25)];{_x ctrlCommit 0;}forEach[_asylumHeader,_asylumWiki,_asylumTeamspeak,_asylumDiscord,_asylumForums,_asylumMyAsylum];uiNamespace setVariable["BIS_DisplayInterrupt_ServerButtons",[_asylumHeader,_asylumWiki,_asylumTeamspeak,_asylumDiscord,_asylumForums,_asylumMyAsylum]];_optionsButton ctrlAddEventHandler["ButtonClick",{_this spawn{private _buttons=uiNamespace getVariable["BIS_DisplayInterrupt_ServerButtons",[]];private _isExpanded=uiNamespace getvariable["BIS_DisplayInterrupt_isOptionsExpanded",false];{private _buttonPosition=ctrlPosition _x;private _padding=((_buttonPosition select 1)-GUI_GRID_Y)/GUI_GRID_H;if(_isExpanded) then{_x ctrlSetPosition[(_buttonPosition select 0),((_padding+4.4)*GUI_GRID_H+GUI_GRID_Y),(_buttonPosition select 2),(_buttonPosition select 3) ];}else{_x ctrlSetPosition[(_buttonPosition select 0),((_padding-4.4)*GUI_GRID_H+GUI_GRID_Y),(_buttonPosition select 2),(_buttonPosition select 3) ];};_x ctrlCommit 0.2;}forEach _buttons;};}];_respawn buttonSetAction"life_suicide = true;";private _enableButtons=(!(isNil"life_session_completed")&&{!(player getVariable["ga_restrained",false])&&life_session_completed&&!(life_isDowned)&&!(player getVariable["ga_escorting",false])&&!(player getVariable["ga_transporting",false])&&((life_is_arrested select 0) isEqualTo 0)&&!life_killedByElectricChair});if(_enableButtons) then{[_abort,_respawn,_display]spawn{params["_abort","_respawn","_display"];private _timeStamp=if(call life_adminLevel>=2) then{time+1}else{time+15};waitUntil{_abort ctrlSetText format["Quit Asylum [%1]",round(_timeStamp-time)];_respawn ctrlSetText format["Suicide [%1]",round(_timeStamp-time)];round(_timeStamp-time)<=0||isNull _display };_abort ctrlSetText"Quit Asylum Life";_respawn ctrlSetText"Suicide";_abort ctrlEnable true;_respawn ctrlEnable true;if(life_session_completed) then{[]call life_fnc_ClupdateRequest};waitUntil{uiSleep 0.1;isNull _display};if(alive player) then{life_suicide=nil};};}else{if((life_is_arrested select 0) isEqualTo 1) then{_abort ctrlSetText"Quit Asylum Life";_abort ctrlEnable true;};};