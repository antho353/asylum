#include"..\..\macro.h"
life_action_in_use=false;params[["_civ",objNull,[objNull]],["_invs",[],[[]]],["_robber",false,[false]],["_runner",false,[false]],["_licenses","",[""]],["_seizableMoney",0,[0]],["_alcoholLevel",0,[0]],["_drugLevel",0,[0]]];if(isNull _civ) exitWith{};private _illegal=0;private _inv="";private _index=-1;private _illegalItems=["getIllegalItems"]call life_fnc_virtItemCfg;private _illegalExempt=if(SRV_governorData param[3,false]) then{life_governorLegalisableItems}else{[]};if!(_invs isEqualTo[]) then{{_x params["_item","_val"];_inv=_inv+format["%1 %2<br/>",_val,["getName",_item]call life_fnc_virtItemCfg];_index=[_item,_illegalItems]call life_fnc_index;if(!(_item in _illegalExempt)&&!(_index isEqualTo-1)) then{_illegal=_illegal+(_val*((_illegalItems select _index) select 1));};}forEach _invs;[[0,format["%1 has $%2 worth of contraband on them.",name _civ,[_illegal]call life_fnc_numberText]],"life_fnc_broadcast",west,false,false]spawn life_fnc_MP;}else{_inv="No illegal items";};if(player distance _civ>5||!(alive _civ)) exitWith{[format["Couldn't search %1",name _civ],"basic"]spawn life_fnc_handleMessage;};private _weapons="";{_weapons=_weapons+format["%1<br/>",getText(configFile>>"CfgWeapons">>_x>>"displayName")];}forEach(weapons _civ);if(_weapons isEqualTo"") then{_weapons="No weapons<br/>";};private _class=[];private _qty=[];private _magazines="";private _className="";{if!(_x in _class) then{_class pushBack _x;_qty pushBack 0;};_index=-1;_className=_x;{if(_x==_className) then{_index=_forEachIndex};}forEach _class;_qty set[_index,(_qty select _index)+1];}forEach(magazines _civ);if(_class isEqualTo[]) then{_magazines="No magazines or grenades<br/>";}else{{_magazines=_magazines+format["%2x %1<br/>",getText(configFile>>"CfgMagazines">>_x>>"displayName"),_qty select _forEachIndex];